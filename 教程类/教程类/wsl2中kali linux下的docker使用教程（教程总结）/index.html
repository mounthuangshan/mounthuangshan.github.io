

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="黄山">
  <meta name="keywords" content="C/C++,Python,C#,Go,Web,AI,游戏开发,网络安全">
  
    <meta name="description" content="一、前言 上一篇关于kali linux的文章是图形界面的配置，这里作者准备补充两点，一点是在使用VNC时，如果F8不能用的话，可以试试Alt+F8；然后就是VNC在初始化设置时的三个设置选项依次是密码、再输一次以及设置仅观看密码。 下面作者将讲述在wsl2中kali linux下的docker的使用，这里还是有很多坑的。 二、介绍docker 首先安装docker时你肯定会有很多疑问，docke">
<meta property="og:type" content="article">
<meta property="og:title" content="wsl2中kali linux下的docker使用教程（教程总结）">
<meta property="og:url" content="https://mounthuangshan.github.io/%E6%95%99%E7%A8%8B%E7%B1%BB/%E6%95%99%E7%A8%8B%E7%B1%BB/wsl2%E4%B8%ADkali%20linux%E4%B8%8B%E7%9A%84docker%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E6%95%99%E7%A8%8B%E6%80%BB%E7%BB%93%EF%BC%89/">
<meta property="og:site_name" content="钺不言">
<meta property="og:description" content="一、前言 上一篇关于kali linux的文章是图形界面的配置，这里作者准备补充两点，一点是在使用VNC时，如果F8不能用的话，可以试试Alt+F8；然后就是VNC在初始化设置时的三个设置选项依次是密码、再输一次以及设置仅观看密码。 下面作者将讲述在wsl2中kali linux下的docker的使用，这里还是有很多坑的。 二、介绍docker 首先安装docker时你肯定会有很多疑问，docke">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-18T18:19:05.000Z">
<meta property="article:modified_time" content="2025-03-18T18:19:05.849Z">
<meta property="article:author" content="黄山">
<meta property="article:tag" content="C&#x2F;C++">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="C#">
<meta property="article:tag" content="Go">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="游戏开发">
<meta property="article:tag" content="网络安全">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>wsl2中kali linux下的docker使用教程（教程总结） - 钺不言</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"mounthuangshan.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="wsl2中kali linux下的docker使用教程（教程总结）"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-03-19 02:19" pubdate>
          2025年3月19日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          34 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">wsl2中kali linux下的docker使用教程（教程总结）</h1>
            
            
              <div class="markdown-body">
                
                <h1>一、前言</h1>
<p>上一篇关于kali linux的文章是图形界面的配置，这里作者准备补充两点，一点是在使用VNC时，如果F8不能用的话，可以试试Alt+F8；然后就是VNC在初始化设置时的三个设置选项依次是密码、再输一次以及设置仅观看密码。<br>
下面作者将讲述在wsl2中kali linux下的docker的使用，这里还是有很多坑的。</p>
<h1>二、介绍docker</h1>
<p>首先安装docker时你肯定会有很多疑问，docker为什么会有这么多的版本，作者一开始也是有这样的问题，下面作者将解释docker各个版本的区别：<br>
首先是docker ce与docker io的区别：<br>
Docker CE（Community Edition）和Docker.io在多个方面存在显著的区别。以下是对这两者的详细比较：</p>
<p>** 一、维护方与版本更新**</p>
<ol>
<li>
<p><strong>Docker CE</strong>：</p>
<ul>
<li>由Docker官方维护。</li>
<li>更新频率高，包括每个月的安全更新和每季度的功能更新。</li>
</ul>
</li>
<li>
<p><strong><a target="_blank" rel="noopener" href="http://Docker.io">Docker.io</a></strong>：</p>
<ul>
<li>通常由Debian团队维护（也可能因系统不同而有所差异，但普遍与Debian或Ubuntu系统紧密相关）。</li>
<li>更新频率相对较低，可能依赖于Debian或Ubuntu的发布周期。</li>
</ul>
</li>
</ol>
<p><strong>二、依赖管理与安装方式</strong></p>
<ol>
<li>
<p><strong>Docker CE</strong>：</p>
<ul>
<li>使用Go语言编写，并自行管理所有依赖项，不依赖于系统的包管理器。</li>
<li>提供了完整的容器化平台，包括Docker守护程序、命令行客户端等必要组件。</li>
</ul>
</li>
<li>
<p><strong><a target="_blank" rel="noopener" href="http://Docker.io">Docker.io</a></strong>：</p>
<ul>
<li>依赖apt包管理系统（在基于Debian或Ubuntu的系统上）来管理其依赖项。</li>
<li>安装方式通常通过apt包管理器进行。</li>
</ul>
</li>
</ol>
<p><strong>三、功能与社区支持</strong></p>
<ol>
<li>
<p><strong>Docker CE</strong>：</p>
<ul>
<li>提供了最新的功能和特性，因为官方会快速迭代并发布新版本。</li>
<li>拥有强大的社区支持和丰富的文档资源。</li>
</ul>
</li>
<li>
<p><strong><a target="_blank" rel="noopener" href="http://Docker.io">Docker.io</a></strong>：</p>
<ul>
<li>在功能上可能不如Docker CE新，因为更新速度较慢。</li>
<li>在文档和社区支持方面可能相对较少，尽管仍有Debian或Ubuntu社区的支持。</li>
</ul>
</li>
</ol>
<p><strong>四、适用场景与推荐</strong></p>
<ol>
<li>
<p><strong>Docker CE</strong>：</p>
<ul>
<li>适用于刚开始接触Docker以及基于Docker进行应用开发的开发者或小型团队。</li>
<li>提供了完整的容器化平台，更容易获得官方支持和更新。</li>
</ul>
</li>
<li>
<p><strong><a target="_blank" rel="noopener" href="http://Docker.io">Docker.io</a></strong>：</p>
<ul>
<li>适用于已经在使用基于Debian或Ubuntu的系统，并且希望保持系统包管理一致性的用户。</li>
<li>如果不需要最新的功能和更新速度，<a target="_blank" rel="noopener" href="http://xn--Docker-2x8i64bc2wqw1bc74beo2d.io">可以选择使用Docker.io</a>。</li>
</ul>
</li>
</ol>
<p>docker还有个版本是docker EE，和CE区别是CE是社区版，而EE是企业版。<br>
上面的docker ce、ee、io都是docker引擎的非桌面版，而桌面版就是更为熟知的docker desktop，下面是docker的一些组件：</p>
<ul>
<li>
<p>docker <a target="_blank" rel="noopener" href="http://containerd.io">containerd.io</a><br>
是Docker容器运行时的核心组件之一，它负责管理和运行容器。它提供了容器的生命周期管理、镜像管理、网络管理等功能。</p>
</li>
<li>
<p>docker-ce<br>
是Docker Community Edition的缩写，是Docker的社区版本。它是一个开源的容器化平台，提供了构建、发布和运行容器的工具和服务。广义来说，docker-ce包含了dockerd（Docker守护进程）、docker命令行工具、docker-compose等组件；狭义上来讲，docker-ce 是与 docker <a target="_blank" rel="noopener" href="http://containerd.io">containerd.io</a>、docker-ce-cli 并列的服务组件。</p>
</li>
<li>
<p>docker-ce-cli（cli即Client的缩写）<br>
是Docker Community Edition的命令行工具（command line）。它提供了与Docker守护进程进行交互的命令行接口，可以用于管理和操作Docker容器、镜像、网络等。</p>
</li>
<li>
<p>docker-buildx-plugin<br>
是Docker的一个插件，用于构建多平台的容器镜像。它可以在一个构建过程中同时构建多个不同平台的镜像，例如x86、ARM等。这样可以方便地为不同平台的设备提供适配的容器镜像。</p>
</li>
<li>
<p>docker-compose-plugin<br>
是Docker的一个插件，用于管理和编排多个容器的运行。它可以通过一个单独的配置文件定义多个容器之间的关系和依赖，然后通过简单的命令就可以启动、停止、删除这些容器。</p>
</li>
<li>
<p>docker-ce-rootless<br>
是Docker Community Edition的无根用户版本。它允许非特权用户在没有root权限的情况下运行Docker容器。这样可以提高容器的安全性，减少潜在的安全风险。</p>
</li>
<li>
<p>docker-scan-plugin<br>
是Docker的一个插件，用于容器镜像的安全扫描。它可以对容器镜像进行静态和动态的安全分析，检测其中的漏洞和风险。这样可以帮助用户及时发现和修复容器镜像中的安全问题。</p>
</li>
<li>
<p>docker-machine-plugin<br>
Docker Machine是一种工具，可让您在虚拟主机上安装Docker Engine，并使用docker-machine命令管理主机。简单来说就是给你快速创建一个docker容器环境的，如果你要给100台物理机安装上docker，传统方式就是你一台一台ssh上去安装，但是有了docker-machine你可以快速给100台ecs安装上docker。</p>
</li>
<li>
<p>Docker Daemon（守护进程）：<br>
是Docker架构中的核心组件，负责在后台运行并管理Docker容器的生命周期。<br>
它还负责管理Docker镜像、网络和存储等。<br>
有时也被称为Docker引擎（Docker Engine）的一部分。</p>
</li>
<li>
<p>Docker 镜像（Image）：<br>
是Docker容器的基础，是一个只读的模板。<br>
镜像包含了运行应用程序所需的一切，包括代码、运行时、库、配置文件等。<br>
用户可以从Docker Hub或其他镜像仓库中拉取镜像，也可以根据自己的需求创建自定义镜像。</p>
</li>
<li>
<p>Docker 容器（Container）：<br>
是基于Docker镜像创建的运行时实例。<br>
每个Docker容器都是相互隔离的，可以在其自己的命名空间中运行。<br>
容器内包含了应用程序、运行时环境和所有依赖项。</p>
</li>
<li>
<p>Docker Registry（镜像仓库）：<br>
是一个存储和分发Docker镜像的中央存储库。<br>
可以是公共的，如Docker Hub，也可以是私有的，如企业内部的镜像仓库。<br>
用户可以在Docker Registry中搜索、下载和上传镜像。</p>
</li>
<li>
<p>Docker Swarm：<br>
是Docker的内置集群管理器，可以将多个Docker主机组合在一起，形成一个单一的虚拟主机。<br>
Docker Swarm可以自动化容器的部署、伸缩和故障转移，并支持负载均衡和自动扩展等功能。</p>
</li>
<li>
<p>Dockerfile：<br>
是用于构建Docker镜像的文本文件，包含了一系列指令，用于描述镜像的构建过程。<br>
开发者可以通过Dockerfile定义所需的软件环境和配置，然后使用Docker CLI的build命令将其构建成Docker镜像。</p>
</li>
<li>
<p>Docker Network：<br>
是Docker提供的网络管理工具，用于管理容器之间的通信。<br>
支持多种网络驱动，包括bridge、overlay、macvlan等，可以满足不同的网络需求。</p>
</li>
<li>
<p>Docker Volume：<br>
是Docker提供的存储管理工具，用于管理容器的数据卷。<br>
数据卷可以将容器的数据存储到宿主机或其他容器中，以实现数据共享和持久化。</p>
</li>
<li>
<p>Docker API：<br>
提供了一套编程接口，允许其他工具或系统与Docker进行集成。</p>
</li>
</ul>
<p>这里再额外介绍一个docker的终端UI管理工具，lazydocker：<br>
LazyDocker 是适用于 Docker 和 Docker Compose 的新的免费开源的终端 UI ，用于显示 Docker 或 Docker-compose 容器的状态，日志以及重新启动/删除/重建容器等，采用 Go 语言编写，使用了 gocui 库。在 Linux 服务器上管理 Docker 容器时，通常有两种选择：安装或部署基于 Web 的 GUI 或从命令行管理容器，而 LazyDocker 介于两者之间，采用了基于 terminal 的 简单 UI。</p>
<h1>三、windows上的docker和linux下的docker的区别</h1>
<p>docker实际上是Namespace、Cgroups、以及 rootfs 三大技术构建出来的隔离环境，在linux环境上，docker其实是起到了一个启动代理，通过设置一大堆启动参数，给应用进程配置好运行环境；其实docker本身并没有一个独立的运行环境。<br>
Namespace、Cgroups以及rootfs是与容器技术紧密相关的三个核心概念，它们在容器的实现和运行中扮演着重要的角色。以下是对这三个概念的详细解释：</p>
<p><strong>Namespace</strong></p>
<ol>
<li><strong>定义</strong>：Namespace即“命名空间”，也称“名称空间”，是Linux内核提供的一种资源隔离机制。</li>
<li><strong>作用</strong>：通过将某个特定的资源隔离出来，使得容器内的进程拥有独立的命名空间，从而避免与宿主机或其他容器内的进程产生命名冲突。例如，在容器内，PID（进程ID）为1的进程通常是容器的初始进程，而在宿主机上，PID为1的进程通常是系统的init进程。通过Namespace的隔离，容器内的进程无法看到宿主机或其他容器的进程。（并不是所有资源都能隔离，例如时间，在容器中修改时间会对整个宿主机起作用）</li>
<li><strong>类型</strong>：Linux内核提供了多种类型的Namespace，包括PID Namespace、UTS Namespace（用于隔离主机名和域名）、IPC Namespace（用于隔离进程间通信资源）、Network Namespace（用于隔离网络资源）等。</li>
</ol>
<p><strong>Cgroups</strong></p>
<ol>
<li><strong>定义</strong>：Cgroups（Control Groups）是Linux内核提供的一种机制，用于限制、记录和隔离进程组所使用的物理资源。</li>
<li><strong>作用</strong>：通过Cgroups，系统管理员可以将一系列任务及其子任务整合到不同的组内，并为这些组分配特定的资源限制。例如，可以限制某个容器使用的CPU时间、内存大小等。</li>
<li><strong>实现方式</strong>：Cgroups通过内核附加在程序上的一系列钩子（hook）来实现资源追踪和限制。当程序运行时，这些钩子会根据资源调度的需求触发相应的操作，以确保资源的使用不超过预设的限制。</li>
</ol>
<p><strong>Rootfs</strong></p>
<ol>
<li><strong>定义</strong>：Rootfs（Root File System）是Linux系统启动时挂载的初始根文件系统。</li>
<li><strong>作用</strong>：Rootfs包含了Linux系统在启动过程中需要使用的所有文件和目录，包括必要的运行库、初始化脚本以及用户空间和内核空间所需的程序和配置文件等。它是系统启动时的第一个文件系统，也是容器内进程运行的基础环境。</li>
<li><strong>特性</strong>：在Linux系统中，rootfs通常是一个只读的文件系统。容器技术通过修改rootfs来创建不同的容器环境，每个容器都有自己独立的根文件系统，从而实现了容器间的文件隔离。</li>
</ol>
<p>这也解释了为什么docker在windows上需要通过虚拟化层（如Hyper-V或WSL2），而在linux上就可以直接使用linux内核没有额外的开销，也就是说其实docker启动的应用，是直接运行在宿主机的，就像普通的程序一样直接调用宿主机的内核。（docker只启动一个进程的原因）</p>
<h1>四、docker的安装</h1>
<p>安装docker io很简单：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sudo apt update<br>sudo apt install -y docker.<span class="hljs-property">io</span><br>sudo systemctl enable docker --now<span class="hljs-comment">//这条命令在wsl2中没用，后面会解释原因</span><br></code></pre></td></tr></table></figure>
<p>键入docker后输出类似如下即成功。<br>
![在这里插入图片描述](./wsl2中kali linux下的docker使用教程（教程总结）image\3ac80d8bb8ab4324a2d589d129e37f01.png)<br>
如果要安装docker ce的话：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//添加存储库，注意存储库是会变动的，建议去官网查询</span><br>echo <span class="hljs-string">&quot;deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian bookworm stable&quot;</span> | \ sudo tee /etc/apt/sources.<span class="hljs-property">list</span>.<span class="hljs-property">d</span>/docker.<span class="hljs-property">list</span> <br> <span class="hljs-comment">//导入gpg密钥</span><br> curl -fsSL <span class="hljs-attr">https</span>:<span class="hljs-comment">//download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg </span><br><span class="hljs-comment">//安装</span><br>sudo apt update<br>sudo apt install -y docker-ce docker-ce-cli containerd.<span class="hljs-property">io</span><br></code></pre></td></tr></table></figure>
<h1>五、问题</h1>
<h2 id="第一个问题">第一个问题</h2>
<p>当你尝试sudo systemctl enable docker --now这个命令企图将docker设置为开机运行时，你会发现，systemd这个命令根本用不了，于是我们键入ps -p 1 -o comm=这个命令去查看系统运行的第一个进程，你会发现输出了init，这说明你的系统没有使用systemd，应该使用init命令，也就是说，我们需要用sysvinit命令代替systemctl命令：<br>
![在这里插入图片描述](./wsl2中kali linux下的docker使用教程（教程总结）image\1732754924d54e65b44fe141364636b0.png)<br>
然后你会试图使用chkconfig这个命令再次让docker设置为开机自启，你会发现这个命令在现在的版本中被淘汰了，现在只能用sysv-rc-conf这个命令，但是，作者并没有安装成功这个命令，所以作者除了使用一些间接方法外，目前没有找到能直接让docker变成开机自启的方法。</p>
<h2 id="第二个问题">第二个问题</h2>
<p>当你尝试使用docker去拉取镜像时，你可能会遇到这个报错：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Docker</span>: <span class="hljs-title class_">Unknown</span> <span class="hljs-title class_">Server</span> <span class="hljs-variable constant_">OS</span>.<br></code></pre></td></tr></table></figure>
<p>这个报错可能有多种原因，但往往当你去检查docker的运行状态时你会发现，它根本没运行，也就是sudo service docker start没有报错，但是查状态就是Docker is not running，然后查看日志cat /var/log/docker.log，输出了一堆千奇百怪的东西，作者目前找到的解法是：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">///etc/fstab文件是Linux系统中用于存储静态文件系统信息的文件，系统在启动时会自动读取这个文件，以自动挂载磁盘分区等。通常情况下，手动创建或修改这个文件需要谨慎，因为错误的配置可能导致系统无法正常启动。</span><br>touch /etc/fstab<br><span class="hljs-comment">//update-alternatives是Debian及其衍生版（如Ubuntu）中的一个工具，用于管理系统中命令的多个版本。这个命令的作用是将iptables命令的默认版本设置为/usr/sbin/iptables-legacy。在某些Linux发行版中，为了兼容旧版本的配置和脚本，可能会提供iptables-legacy版本。这个操作通常在系统升级后，新的iptables版本与旧脚本不兼容时进行。</span><br>update-alternatives --set iptables /usr/sbin/iptables-legacy<br><span class="hljs-comment">//这个命令的作用与上一个类似，只不过它是针对ip6tables命令，将其默认版本设置为/usr/sbin/ip6tables-legacy。ip6tables是用于配置IPv6防火墙规则的工具。</span><br>update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy<br><span class="hljs-comment">//再次尝试</span><br>sudo service docker start<br>sudo service docker status<br></code></pre></td></tr></table></figure>
<p>如果你的日志报错和下面的比较像，你可以试试这个：<br>
![在这里插入图片描述](./wsl2中kali linux下的docker使用教程（教程总结）image\0ac3b4ceae874793a247681019391b5b.png)<br>
来源：thepoy（<a target="_blank" rel="noopener" href="https://www.cnblogs.com/thepoy/p/16004037.html%EF%BC%89">https://www.cnblogs.com/thepoy/p/16004037.html）</a></p>
<h2 id="第三个问题">第三个问题</h2>
<p>于是你再次尝试拉取镜像，你可能会发现这个报错：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">docker</span>: <span class="hljs-title class_">Get</span> <span class="hljs-attr">https</span>:<span class="hljs-comment">//registry-1.docker.io/v2/: net/http: request canceled </span><br></code></pre></td></tr></table></figure>
<p>这个就是网络的问题，最简单的方法就是给docker配置一个代理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sudo mkdir -p /etc/systemd/system/docker.<span class="hljs-property">service</span>.<span class="hljs-property">d</span><br>sudo touch /etc/systemd/system/docker.<span class="hljs-property">service</span>.<span class="hljs-property">d</span>/http-proxy.<span class="hljs-property">conf</span><br>sudo vim /etc/systemd/system/docker.<span class="hljs-property">service</span>.<span class="hljs-property">d</span>/http-proxy.<span class="hljs-property">conf</span><br><span class="hljs-comment">//添加下面的东西</span><br>[<span class="hljs-title class_">Service</span>]<br><span class="hljs-title class_">Environment</span>=<span class="hljs-string">&quot;HTTP_PROXY=你虚拟机网卡的地址:你代理的端口/&quot;</span><br><span class="hljs-title class_">Environment</span>=<span class="hljs-string">&quot;HTTPS_PROXY=你虚拟机网卡的地址:你代理的端口/&quot;</span><br><span class="hljs-title class_">Environment</span>=<span class="hljs-string">&quot;NO_PROXY=localhost,127.0.0.1,.example.com&quot;</span><br></code></pre></td></tr></table></figure>
<p>然后刷新配置并重启</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">sudo systemctl daemon-reload<br>sudo systemctl restart docker<br></code></pre></td></tr></table></figure>
<h2 id="第四个问题">第四个问题</h2>
<p>再次尝试拉取镜像，你可能又会碰到下面的错误：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Error</span> response <span class="hljs-keyword">from</span> <span class="hljs-attr">daemon</span>: <span class="hljs-title class_">Get</span> “<span class="hljs-attr">https</span>:<span class="hljs-comment">//registry-1.docker.io/v2/“: dial tcp</span><br></code></pre></td></tr></table></figure>
<p>这里可能是dns的问题，cat /etc/resolv.conf查看dns客户机的配置文件，如果是8.8.8.8谷歌的dns的话，可以换成114.114.114.114国内的dns。</p>
<h2 id="第五个问题">第五个问题</h2>
<p>第五个问题是关于kvm的问题，你可以通过以下命令检查是否支持kvm：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//查看cpu是否支持硬件虚拟化，如果是大于0的数就是可以的</span><br>egrep -c <span class="hljs-string">&#x27;(vmx|svm)&#x27;</span> /proc/cpuinfo<br><span class="hljs-comment">//如果是kvm acceleration can be used就是可以的</span><br>kvm-ok<br><span class="hljs-comment">//如果返回Y就是可以的</span><br>cat /sys/<span class="hljs-variable language_">module</span>/kvm_intel/parameters/nested<br></code></pre></td></tr></table></figure>
<p>如果不支持可以去网上搜一搜如何解决，作者这里是支持的，但是在拉取某些镜像时仍然会报错无法加载之类的，暂时没有好的解决方案。这里有篇比较不错的可以参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_46161993/article/details/114946221">https://blog.csdn.net/m0_46161993/article/details/114946221</a></p>
<h1>五、总结</h1>
<p>想到更多关于docker的再更，目前就这些。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%95%99%E7%A8%8B%E7%B1%BB/" class="category-chain-item">教程类</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>wsl2中kali linux下的docker使用教程（教程总结）</div>
      <div>https://mounthuangshan.github.io/教程类/教程类/wsl2中kali linux下的docker使用教程（教程总结）/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>黄山</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年3月19日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E6%95%99%E7%A8%8B%E7%B1%BB/%E6%95%99%E7%A8%8B%E7%B1%BB/kali%20linux2024.01%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/" title="kali linux2024">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">kali linux2024</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/%E6%95%99%E7%A8%8B%E7%B1%BB/%E6%95%99%E7%A8%8B%E7%B1%BB/%E4%BA%92%E8%81%94%E7%BD%91%E7%9B%B8%E5%85%B3%E5%85%AC%E5%8F%B8%E5%8F%8A%E5%85%B6%E7%AE%80%E4%BB%8B/" title="互联网相关公司及其简介">
                        <span class="hidden-mobile">互联网相关公司及其简介</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
