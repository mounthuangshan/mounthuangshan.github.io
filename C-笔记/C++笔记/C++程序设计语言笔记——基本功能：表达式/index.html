

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="é»„å±±">
  <meta name="keywords" content="C/C++,Python,C#,Go,Web,AI,æ¸¸æˆå¼€å‘,ç½‘ç»œå®‰å…¨">
  
    <meta name="description" content="0 ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ï¼Œç„¶åæ˜¯å…¶ä»–åº“ï¼Œæœ€åæ‰æ˜¯â€œæ‰‹å·¥æ‰“é€ çš„ä»£ç â€ã€‚ åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œéµå¾ªâ€œä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“ â†’ æ‰‹åŠ¨å®ç°â€çš„åŸåˆ™èƒ½æœ‰æ•ˆæå‡ä»£ç è´¨é‡ã€å¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®è·µæŒ‡å—ï¼š  1. ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ ä¸ºä»€ä¹ˆï¼Ÿ  âœ… ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼šæ ‡å‡†åº“éšè¯­è¨€å‘å¸ƒï¼Œç»è¿‡å¤§é‡éªŒè¯ï¼ˆå¦‚Pythonçš„collectionsæ¨¡å—ï¼‰ âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šåº•å±‚é€šå¸¸ç”¨C&#x2F;C++å®ç°ï¼ˆå¦‚Javaçš„Arrays.sor">
<meta property="og:type" content="article">
<meta property="og:title" content="C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¡¨è¾¾å¼">
<meta property="og:url" content="https://mounthuangshan.github.io/C-%E7%AC%94%E8%AE%B0/C++%E7%AC%94%E8%AE%B0/C++%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%EF%BC%9A%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
<meta property="og:site_name" content="é’ºä¸è¨€">
<meta property="og:description" content="0 ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ï¼Œç„¶åæ˜¯å…¶ä»–åº“ï¼Œæœ€åæ‰æ˜¯â€œæ‰‹å·¥æ‰“é€ çš„ä»£ç â€ã€‚ åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œéµå¾ªâ€œä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“ â†’ æ‰‹åŠ¨å®ç°â€çš„åŸåˆ™èƒ½æœ‰æ•ˆæå‡ä»£ç è´¨é‡ã€å¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®è·µæŒ‡å—ï¼š  1. ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ ä¸ºä»€ä¹ˆï¼Ÿ  âœ… ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼šæ ‡å‡†åº“éšè¯­è¨€å‘å¸ƒï¼Œç»è¿‡å¤§é‡éªŒè¯ï¼ˆå¦‚Pythonçš„collectionsæ¨¡å—ï¼‰ âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šåº•å±‚é€šå¸¸ç”¨C&#x2F;C++å®ç°ï¼ˆå¦‚Javaçš„Arrays.sor">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-18T18:19:05.000Z">
<meta property="article:modified_time" content="2025-03-18T18:19:05.849Z">
<meta property="article:author" content="é»„å±±">
<meta property="article:tag" content="C&#x2F;C++">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="C#">
<meta property="article:tag" content="Go">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="æ¸¸æˆå¼€å‘">
<meta property="article:tag" content="ç½‘ç»œå®‰å…¨">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¡¨è¾¾å¼ - é’ºä¸è¨€</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"mounthuangshan.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¡¨è¾¾å¼"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-03-19 02:19" pubdate>
          2025å¹´3æœˆ19æ—¥ å‡Œæ™¨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.9k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          58 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¡¨è¾¾å¼</h1>
            
            
              <div class="markdown-body">
                
                <h1>0 ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ï¼Œç„¶åæ˜¯å…¶ä»–åº“ï¼Œæœ€åæ‰æ˜¯â€œæ‰‹å·¥æ‰“é€ çš„ä»£ç â€ã€‚</h1>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œéµå¾ªâ€œä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“ â†’ æ‰‹åŠ¨å®ç°â€çš„åŸåˆ™èƒ½æœ‰æ•ˆæå‡ä»£ç è´¨é‡ã€å¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®è·µæŒ‡å—ï¼š</p>
<hr>
<h3 id="1-ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“"><strong>1. ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“</strong></h3>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>âœ… <strong>ç»è¿‡ä¸¥æ ¼æµ‹è¯•</strong>ï¼šæ ‡å‡†åº“éšè¯­è¨€å‘å¸ƒï¼Œç»è¿‡å¤§é‡éªŒè¯ï¼ˆå¦‚Pythonçš„<code>collections</code>æ¨¡å—ï¼‰</li>
<li>âš¡ <strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåº•å±‚é€šå¸¸ç”¨C/C++å®ç°ï¼ˆå¦‚Javaçš„<code>Arrays.sort()</code>ï¼‰</li>
<li>ğŸ“š <strong>ä»£ç å¯è¯»æ€§</strong>ï¼šå¼€å‘è€…æ™®éç†Ÿæ‚‰æ ‡å‡†åº“API</li>
<li>ğŸ”’ <strong>å®‰å…¨æ€§</strong>ï¼šé¿å…æ‰‹åŠ¨å®ç°æ—¶çš„æ½œåœ¨æ¼æ´ï¼ˆå¦‚å¯†ç å­¦æ¨¡å—<code>hashlib</code>ï¼‰</li>
</ul>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç”¨collections.defaultdictä»£æ›¿æ‰‹åŠ¨å¤„ç†é”®ä¸å­˜åœ¨çš„æƒ…å†µ</span><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br>data = defaultdict(<span class="hljs-built_in">list</span>)<br>data[key].append(value)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-åˆç†é€‰æ‹©ç¬¬ä¸‰æ–¹åº“"><strong>2. åˆç†é€‰æ‹©ç¬¬ä¸‰æ–¹åº“</strong></h3>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li>ğŸš€ <strong>å¤æ‚åŠŸèƒ½éœ€æ±‚</strong>ï¼šå›¾åƒå¤„ç†ç”¨OpenCVï¼ŒHTTPå®¢æˆ·ç«¯ç”¨<code>requests</code></li>
<li>ğŸ“Š <strong>é¢†åŸŸä¸“ç”¨å·¥å…·</strong>ï¼šæ•°æ®åˆ†æç”¨pandasï¼Œæœºå™¨å­¦ä¹ ç”¨scikit-learn</li>
<li>â±ï¸ <strong>é¿å…é‡å¤é€ è½®å­</strong>ï¼šå¦‚æ—¥æœŸå¤„ç†ç”¨<code>arrow</code>ä»£æ›¿æ‰‹åŠ¨è§£æ</li>
</ul>
<p><strong>é€‰æ‹©æ ‡å‡†</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ¯”è¾ƒrequestsä¸æ‰‹åŠ¨å¤„ç†HTTPè¿æ¥</span><br><span class="hljs-keyword">import</span> requests  <span class="hljs-comment"># è‡ªåŠ¨å¤„ç†é‡è¯•ã€è¿æ¥æ± ã€SSLéªŒè¯</span><br>resp = requests.get(url, timeout=<span class="hljs-number">3</span>)<br><br><span class="hljs-comment"># VSæ‰‹åŠ¨å®ç°éœ€è¦å¤„ç†ï¼š</span><br><span class="hljs-comment"># - Socketè¿æ¥è¶…æ—¶</span><br><span class="hljs-comment"># - å¼‚å¸¸é‡è¯•æœºåˆ¶</span><br><span class="hljs-comment"># - å“åº”è§£ç </span><br><span class="hljs-comment"># - SSLè¯ä¹¦éªŒè¯</span><br></code></pre></td></tr></table></figure>
<p><strong>é£é™©æ§åˆ¶</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥åº“çš„ç»´æŠ¤çŠ¶æ€ï¼ˆGitHub stars/commits/issuesï¼‰</li>
<li>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»ä¾èµ–ï¼ˆå¦‚Pythonçš„venvï¼‰</li>
<li>é€šè¿‡é”æ–‡ä»¶å›ºå®šç‰ˆæœ¬ï¼ˆ<code>requirements.txt</code>/<code>poetry.lock</code>ï¼‰</li>
</ul>
<hr>
<h3 id="3-è°¨æ…æ‰‹åŠ¨å®ç°"><strong>3. è°¨æ…æ‰‹åŠ¨å®ç°</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ğŸ¯ <strong>ç‰¹æ®Šéœ€æ±‚</strong>ï¼šéœ€è¦ç‰¹å®šå†…å­˜å¸ƒå±€çš„æ•°æ®ç»“æ„</li>
<li>âš¡ <strong>æ€§èƒ½å…³é”®è·¯å¾„</strong>ï¼šSIMDä¼˜åŒ–å…³é”®å¾ªç¯ï¼ˆå¦‚NumPyå†…éƒ¨å®ç°ï¼‰</li>
<li>ğŸ“¦ <strong>ä¾èµ–æœ€å°åŒ–</strong>ï¼šåµŒå…¥å¼å¼€å‘ä¸­é¿å…å¼•å…¥å¤§å‹åº“</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// æ‰‹åŠ¨å®ç°å†…å­˜æ± é¿å…é¢‘ç¹åˆ†é…</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryPool</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Block</span> &#123; Block* next; &#125;;<br>    Block* freeList;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!freeList) &#123;<br>            <span class="hljs-comment">// ç”³è¯·å†…å­˜å—</span><br>        &#125;<br>        Block* header = freeList;<br>        freeList = freeList-&gt;next;<br>        <span class="hljs-keyword">return</span> header;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>âœï¸ ç¼–å†™è¯¦å°½çš„å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡&gt;90%ï¼‰</li>
<li>ğŸ“Š æ€§èƒ½å¯¹æ¯”æµ‹è¯•ï¼ˆä½¿ç”¨Google Benchmarkç­‰å·¥å…·ï¼‰</li>
<li>ğŸ“ æ·»åŠ è¯¦ç»†æ³¨é‡Šè¯´æ˜ç®—æ³•æ¥æºï¼ˆå¦‚Dijkstraç®—æ³•å®ç°ï¼‰</li>
</ul>
<hr>
<h3 id="å†³ç­–æµç¨‹å›¾"><strong>å†³ç­–æµç¨‹å›¾</strong></h3>
<pre><code class=" mermaid">graph TD
    A[éœ€æ±‚åˆ†æ] --&gt; B&#123;æ ‡å‡†åº“æ»¡è¶³?&#125;
    B -- Yes --&gt; C[ä½¿ç”¨æ ‡å‡†åº“]
    B -- No --&gt; D&#123;æœ‰å¯é ç¬¬ä¸‰æ–¹åº“?&#125;
    D -- Yes --&gt; E[è¯„ä¼°åº“è´¨é‡åä½¿ç”¨]
    D -- No --&gt; F[æ‰‹åŠ¨å®ç°+è¯¦ç»†æµ‹è¯•]
</code></pre>
<hr>
<h3 id="å…³é”®åŸåˆ™"><strong>å…³é”®åŸåˆ™</strong></h3>
<ol>
<li><strong>å¯ç»´æŠ¤æ€§ä¼˜å…ˆ</strong>ï¼šå›¢é˜Ÿç†Ÿæ‚‰åº¦ &gt; ç†è®ºæœ€ä¼˜</li>
<li><strong>æˆæœ¬è¯„ä¼°</strong>ï¼šå¼€å‘æ—¶é—´ + ç»´æŠ¤æˆæœ¬ &lt; æ”¶ç›Šæ—¶æ‰æ‰‹åŠ¨å®ç°</li>
<li><strong>å®‰å…¨è¾¹ç•Œ</strong>ï¼šåŠ å¯†ç®—æ³•ç­‰æ•æ„Ÿé¢†åŸŸç¦æ­¢è‡ªè¡Œå®ç°ï¼ˆä½¿ç”¨æ ‡å‡†åº“å¦‚<code>cryptography</code>ï¼‰</li>
</ol>
<p>é€šè¿‡åˆ†å±‚é€‰æ‹©å·¥å…·ï¼Œå¼€å‘è€…èƒ½åœ¨æ•ˆç‡ä¸å¯æ§æ€§ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ï¼Œä¸“æ³¨è§£å†³ä¸šåŠ¡æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h1>1 å°½å¯èƒ½ä¸è¦ä½¿ç”¨å­—ç¬¦çº§çš„è¾“å…¥ã€‚</h1>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­é¿å…å­—ç¬¦çº§æ“ä½œæ˜¯æå‡ä»£ç å¥å£®æ€§å’Œå¼€å‘æ•ˆç‡çš„é‡è¦åŸåˆ™ã€‚ä»¥ä¸‹æ˜¯åˆ†å±‚çº§çš„æœ€ä½³å®è·µæŒ‡å—ï¼š</p>
<hr>
<h3 id="1-ä¼˜å…ˆä½¿ç”¨è¯­ä¹‰åŒ–å¤„ç†ï¼ˆæœ€é«˜æ•ˆå®‰å…¨ï¼‰"><strong>1. ä¼˜å…ˆä½¿ç”¨è¯­ä¹‰åŒ–å¤„ç†ï¼ˆæœ€é«˜æ•ˆå®‰å…¨ï¼‰</strong></h3>
<p><strong>å­—ç¬¦ä¸²å¯¹è±¡æ–¹æ³•</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># é”™è¯¯ç¤ºèŒƒï¼šå­—ç¬¦çº§æ‹¼æ¥</span><br>output = []<br><span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> input_str:<br>    <span class="hljs-keyword">if</span> c.isalnum():<br>        output.append(c)<br>result = <span class="hljs-string">&#x27;&#x27;</span>.join(output)<br><br><span class="hljs-comment"># æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨å­—ç¬¦ä¸²æ–¹æ³•</span><br>result = input_str.replace(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>).strip().lower()<br></code></pre></td></tr></table></figure>
<p><strong>ç»“æ„åŒ–æ•°æ®å¤„ç†</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨å­—å…¸è€Œéå­—ç¬¦è§£æ</span><br>config = &#123;<br>    <span class="hljs-string">&quot;timeout&quot;</span>: <span class="hljs-number">30</span>,<br>    <span class="hljs-string">&quot;retries&quot;</span>: <span class="hljs-number">3</span><br>&#125;<br><span class="hljs-comment"># VS æ‰‹åŠ¨è§£æå­—ç¬¦ï¼š</span><br><span class="hljs-comment"># &quot;timeout=30;retries=3&quot;</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-åˆ©ç”¨ç°æœ‰æŠ½è±¡ç»“æ„"><strong>2. åˆ©ç”¨ç°æœ‰æŠ½è±¡ç»“æ„</strong></h3>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-comment"># æå–ç”µè¯å·ç ï¼ˆé¿å…æ‰‹åŠ¨éå†å­—ç¬¦ï¼‰</span><br>pattern = <span class="hljs-string">r&#x27;\b\d&#123;3&#125;-\d&#123;4&#125;-\d&#123;4&#125;\b&#x27;</span><br>phones = re.findall(pattern, text)<br></code></pre></td></tr></table></figure>
<p><strong>è§£æåº“åº”ç”¨</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨python-dateutilä»£æ›¿æ‰‹åŠ¨è§£ææ—¥æœŸ</span><br><span class="hljs-keyword">from</span> dateutil <span class="hljs-keyword">import</span> parser<br>dt = parser.parse(<span class="hljs-string">&quot;2023-08-15T14:30:00+08:00&quot;</span>)  <span class="hljs-comment"># è‡ªåŠ¨å¤„ç†æ—¶åŒº</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-æ‰¹é‡æ“ä½œä»£æ›¿é€å­—ç¬¦å¤„ç†"><strong>3. æ‰¹é‡æ“ä½œä»£æ›¿é€å­—ç¬¦å¤„ç†</strong></h3>
<p><strong>å‘é‡åŒ–è¿ç®—</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨NumPyè¿›è¡Œæ‰¹é‡å¤„ç†</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>arr = np.array([<span class="hljs-string">&#x27;a1&#x27;</span>, <span class="hljs-string">&#x27;b2&#x27;</span>, <span class="hljs-string">&#x27;c3&#x27;</span>])<br>result = np.char.upper(arr)  <span class="hljs-comment"># [&#x27;A1&#x27;, &#x27;B2&#x27;, &#x27;C3&#x27;]</span><br></code></pre></td></tr></table></figure>
<p><strong>é›†åˆè¿ç®—</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># é›†åˆæ“ä½œæ›¿ä»£å­—ç¬¦æ£€æŸ¥</span><br>valid_chars = <span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;abcdef&#x27;</span>)<br>input_set = <span class="hljs-built_in">set</span>(input_str)<br><span class="hljs-keyword">if</span> input_set &lt;= valid_chars:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Valid characters&quot;</span>)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="4-æµå¼å¤„ç†å¤§æ–‡æœ¬"><strong>4. æµå¼å¤„ç†å¤§æ–‡æœ¬</strong></h3>
<p><strong>ç”Ÿæˆå™¨ç®¡é“</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_lines</span>(<span class="hljs-params">file_path</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path) <span class="hljs-keyword">as</span> f:<br>        <span class="hljs-keyword">return</span> (line.upper().replace(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>) <br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f <br>                <span class="hljs-keyword">if</span> line.startswith(<span class="hljs-string">&#x27;INFO&#x27;</span>))<br><br><span class="hljs-comment"># å¤„ç†10GBæ—¥å¿—æ–‡ä»¶åªéœ€å¸¸é©»å†…å­˜</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-éœ€è¦å­—ç¬¦çº§æ“ä½œæ—¶çš„å®‰å…¨æ–¹æ¡ˆ"><strong>5. éœ€è¦å­—ç¬¦çº§æ“ä½œæ—¶çš„å®‰å…¨æ–¹æ¡ˆ</strong></h3>
<p><strong>å†…å­˜è§†å›¾ï¼ˆé›¶æ‹·è´ï¼‰</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¤„ç†äºŒè¿›åˆ¶åè®®æ—¶çš„é«˜æ•ˆæ–¹å¼</span><br>data = <span class="hljs-string">b&#x27;HTTP/1.1 200 OK&#x27;</span><br>header_end = data.find(<span class="hljs-string">b&#x27;\r\n\r\n&#x27;</span>)<br>header = <span class="hljs-built_in">memoryview</span>(data)[:header_end]<br></code></pre></td></tr></table></figure>
<p><strong>ç¼–ç å®‰å…¨å¤„ç†</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ­£ç¡®å¤„ç†Unicodeç»„åˆå­—ç¬¦</span><br><span class="hljs-keyword">import</span> unicodedata<br>s = <span class="hljs-string">&#x27;cafÃ©&#x27;</span>  <span class="hljs-comment"># &#x27;e&#x27; + acute accent</span><br>normalized = unicodedata.normalize(<span class="hljs-string">&#x27;NFC&#x27;</span>, s)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="å†³ç­–æ ‘"><strong>å†³ç­–æ ‘</strong></h3>
<pre><code class=" mermaid">graph TD
    A[è¾“å…¥æ•°æ®å¤„ç†éœ€æ±‚] --&gt; B&#123;æ˜¯å¦å·²æœ‰è¯­ä¹‰åŒ–æ–¹æ³•?&#125;
    B -- Yes --&gt; C[ä½¿ç”¨å­—ç¬¦ä¸²/bytesæ–¹æ³•]
    B -- No --&gt; D&#123;æ˜¯å¦ç»“æ„åŒ–æ•°æ®?&#125;
    D -- Yes --&gt; E[ä½¿ç”¨è§£æåº“å¦‚json/xml]
    D -- No --&gt; F&#123;æ˜¯å¦æ¨¡å¼åŒ¹é…?&#125;
    F -- Yes --&gt; G[æ­£åˆ™è¡¨è¾¾å¼]
    F -- No --&gt; H[è¯„ä¼°ç¬¬ä¸‰æ–¹è§£æå™¨]
</code></pre>
<hr>
<h3 id="æ€§èƒ½å¯¹æ¯”æ¡ˆä¾‹"><strong>æ€§èƒ½å¯¹æ¯”æ¡ˆä¾‹</strong></h3>
<p><strong>éœ€æ±‚</strong>ï¼šè¿‡æ»¤10ä¸‡è¡Œæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è€—æ—¶(ms)</th>
<th>å†…å­˜å ç”¨(MB)</th>
<th>ä»£ç è¡Œæ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>é€å­—ç¬¦å¤„ç†</td>
<td>420</td>
<td>85</td>
<td>35</td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²æ–¹æ³•+ç”Ÿæˆå™¨</td>
<td>110</td>
<td>12</td>
<td>8</td>
</tr>
<tr>
<td>æ­£åˆ™è¡¨è¾¾å¼é¢„ç¼–è¯‘</td>
<td>68</td>
<td>18</td>
<td>4</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="æ ¸å¿ƒåŸåˆ™"><strong>æ ¸å¿ƒåŸåˆ™</strong></h3>
<ol>
<li><strong>æŠ½è±¡å±‚çº§ä¼˜å…ˆ</strong>ï¼šå­—ç¬¦ä¸² &gt; æ­£åˆ™è¡¨è¾¾å¼ &gt; è§£æå™¨ &gt; è‡ªå®šä¹‰å¤„ç†</li>
<li><strong>æ•°æ®ä¸å¯å˜æ€§</strong>ï¼šä¼˜å…ˆè¿”å›æ–°å¯¹è±¡è€Œéä¿®æ”¹åŸæ•°æ®</li>
<li><strong>ç¼–ç æ—©å¤„ç†</strong>ï¼šåœ¨è¾“å…¥è¾¹ç•Œç»Ÿä¸€å¤„ç†ç¼–è§£ç ï¼ˆå¦‚requestsè‡ªåŠ¨è§£ç ï¼‰</li>
<li><strong>é˜²å¾¡æ€§å¤„ç†</strong>ï¼šä½¿ç”¨<code>str.translate()</code>æ¸…ç†ä¸å¯è§å­—ç¬¦</li>
</ol>
<p>é€šè¿‡æå‡å¤„ç†å±‚çº§ï¼Œå¼€å‘è€…å¯ä»¥é¿å…90%ä»¥ä¸Šçš„è¾¹ç•Œæ¡ä»¶é”™è¯¯ï¼ˆå¦‚off-by-oneé”™è¯¯ã€ç¼–ç é”™è¯¯ï¼‰ï¼ŒåŒæ—¶è·å¾—æ›´å¥½çš„æ€§èƒ½è¡¨ç°ã€‚ä»…åœ¨å¤„ç†äºŒè¿›åˆ¶åè®®ã€ç‰¹æ®Šç¼–ç è½¬æ¢ç­‰åº•å±‚åœºæ™¯æ—¶æ‰éœ€è¦å­—ç¬¦çº§æ“ä½œã€‚</p>
<h1>2 è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¸€å®šè¦è€ƒè™‘æ ¼å¼é”™è¯¯çš„å¯èƒ½ã€‚</h1>
<p>åœ¨æ•°æ®è¾“å…¥å¤„ç†ä¸­ï¼Œæ ¼å¼é”™è¯¯é˜²å¾¡æ˜¯ä¿è¯ç³»ç»Ÿå¥å£®æ€§çš„æ ¸å¿ƒè¦ç´ ã€‚ä»¥ä¸‹æ˜¯åˆ†å±‚é˜²å¾¡ä½“ç³»çš„æœ€ä½³å®è·µï¼š</p>
<hr>
<h3 id="1-è¾“å…¥éªŒè¯æ¶æ„è®¾è®¡"><strong>1. è¾“å…¥éªŒè¯æ¶æ„è®¾è®¡</strong></h3>
<pre><code class=" mermaid">graph LR
    A[åŸå§‹æ•°æ®] --&gt; B&#123;è¯­æ³•éªŒè¯&#125;
    B --&gt;|é€šè¿‡| C&#123;è¯­ä¹‰éªŒè¯&#125;
    C --&gt;|é€šè¿‡| D[ä¸šåŠ¡å¤„ç†]
    B --&gt;|å¤±è´¥| E[é”™è¯¯æ—¥å¿—]
    C --&gt;|å¤±è´¥| E
</code></pre>
<hr>
<h3 id="2-å¤šçº§éªŒè¯ç­–ç•¥"><strong>2. å¤šçº§éªŒè¯ç­–ç•¥</strong></h3>
<h4 id="1-è¯­æ³•å±‚éªŒè¯"><strong>(1) è¯­æ³•å±‚éªŒè¯</strong></h4>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼é¢„è¿‡æ»¤</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-comment"># éªŒè¯é‚®ä»¶æ ¼å¼</span><br>email_pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&#x27;</span>)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> email_pattern.<span class="hljs-keyword">match</span>(raw_input):<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Invalid email format&quot;</span>)<br></code></pre></td></tr></table></figure>
<p><strong>ç»“æ„åŒ–æ•°æ®æ ¡éªŒ</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, EmailStr<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br>    name: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># è‡ªåŠ¨æ£€æµ‹éå­—ç¬¦ä¸²ç±»å‹</span><br>    email: EmailStr  <span class="hljs-comment"># å†…ç½®æ ¼å¼éªŒè¯</span><br>    age: <span class="hljs-built_in">int</span> = Field(gt=<span class="hljs-number">0</span>, lt=<span class="hljs-number">150</span>)  <span class="hljs-comment"># å€¼åŸŸé™åˆ¶</span><br></code></pre></td></tr></table></figure>
<h4 id="2-è¯­ä¹‰å±‚éªŒè¯"><strong>(2) è¯­ä¹‰å±‚éªŒè¯</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_temperature</span>(<span class="hljs-params">celsius: <span class="hljs-built_in">float</span></span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (-<span class="hljs-number">273.15</span> &lt;= celsius &lt;= <span class="hljs-number">5505</span>):<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Temperature beyond physical limits&quot;</span>)<br>    <br>    <span class="hljs-keyword">if</span> celsius &gt; <span class="hljs-number">100</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> config.allow_boiling:<br>        <span class="hljs-keyword">raise</span> BusinessRuleViolation(<span class="hljs-string">&quot;é«˜æ¸©æ“ä½œæœªæˆæƒ&quot;</span>)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-é˜²å¾¡æ€§è§£ææŠ€æœ¯"><strong>3. é˜²å¾¡æ€§è§£ææŠ€æœ¯</strong></h3>
<h4 id="å®‰å…¨è§£ææ•°å­—"><strong>å®‰å…¨è§£ææ•°å­—</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> decimal <span class="hljs-keyword">import</span> Decimal, InvalidOperation<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_decimal</span>(<span class="hljs-params">s: <span class="hljs-built_in">str</span></span>) -&gt; Decimal:<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">return</span> Decimal(s.strip())<br>    <span class="hljs-keyword">except</span> InvalidOperation <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f&quot;Invalid number: <span class="hljs-subst">&#123;s&#125;</span>&quot;</span>) <span class="hljs-keyword">from</span> e<br></code></pre></td></tr></table></figure>
<h4 id="å®¹é”™CSVè¯»å–ï¼š"><strong>å®¹é”™CSVè¯»å–</strong>ï¼š</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> StringIO<br><br>csv_data = <span class="hljs-string">&quot;name,age\nAlice,30\nBob,invalid&quot;</span><br><br><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> csv.DictReader(StringIO(csv_data)):<br>    <span class="hljs-keyword">try</span>:<br>        age = <span class="hljs-built_in">int</span>(row[<span class="hljs-string">&#x27;age&#x27;</span>])<br>    <span class="hljs-keyword">except</span> (KeyError, ValueError) <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Row <span class="hljs-subst">&#123;row&#125;</span>: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">continue</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="4-äºŒè¿›åˆ¶æ•°æ®é˜²å¾¡"><strong>4. äºŒè¿›åˆ¶æ•°æ®é˜²å¾¡</strong></h3>
<h4 id="åè®®ç¼“å†²åŒºéªŒè¯ï¼š"><strong>åè®®ç¼“å†²åŒºéªŒè¯</strong>ï¼š</h4>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs protobuf">syntax = <span class="hljs-string">&quot;proto3&quot;</span>;<br><br><span class="hljs-keyword">message </span><span class="hljs-title class_">SensorData</span> &#123;<br>  <span class="hljs-type">uint32</span> id = <span class="hljs-number">1</span> [(validate.rules).<span class="hljs-type">uint32</span>.gt = <span class="hljs-number">1000</span>];<br>  <span class="hljs-type">double</span> value = <span class="hljs-number">2</span> [(validate.rules).<span class="hljs-type">double</span> = &#123;gte: -<span class="hljs-number">200</span>, lte: <span class="hljs-number">500</span>&#125;];<br>  Status status = <span class="hljs-number">3</span>;<br>  <br>  <span class="hljs-keyword">enum </span><span class="hljs-title class_">Status</span> &#123;<br>    NORMAL = <span class="hljs-number">0</span>;<br>    WARNING = <span class="hljs-number">1</span>;<br>    ALERT = <span class="hljs-number">2</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="é­”æ•°éªŒè¯ï¼š"><strong>é­”æ•°éªŒè¯</strong>ï¼š</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_png</span>(<span class="hljs-params">file_header: <span class="hljs-built_in">bytes</span></span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(file_header) &lt; <span class="hljs-number">8</span>:<br>        <span class="hljs-keyword">raise</span> InvalidFormat(<span class="hljs-string">&quot;æ–‡ä»¶è¿‡çŸ­&quot;</span>)<br>    <span class="hljs-keyword">if</span> file_header[:<span class="hljs-number">8</span>] != <span class="hljs-string">b&#x27;\x89PNG\r\n\x1a\n&#x27;</span>:<br>        <span class="hljs-keyword">raise</span> InvalidFormat(<span class="hljs-string">&quot;éPNGæ–‡ä»¶å¤´&quot;</span>)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-é”™è¯¯æ¢å¤ç­–ç•¥"><strong>5. é”™è¯¯æ¢å¤ç­–ç•¥</strong></h3>
<h4 id="é”™è¯¯å®šä½æ—¥å¿—ï¼š"><strong>é”™è¯¯å®šä½æ—¥å¿—</strong>ï¼š</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> json.decoder <span class="hljs-keyword">import</span> JSONDecodeError<br><br><span class="hljs-keyword">try</span>:<br>    data = json.loads(raw_json)<br><span class="hljs-keyword">except</span> JSONDecodeError <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;JSONè§£æå¤±è´¥äºï¼šè¡Œ<span class="hljs-subst">&#123;e.lineno&#125;</span>åˆ—<span class="hljs-subst">&#123;e.colno&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”™è¯¯ä¸Šä¸‹æ–‡ï¼š<span class="hljs-subst">&#123;e.doc[e.pos-<span class="hljs-number">30</span>:e.pos+<span class="hljs-number">30</span>]&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>
<h4 id="æ•°æ®ä¿®å¤ç®¡é“ï¼š"><strong>æ•°æ®ä¿®å¤ç®¡é“</strong>ï¼š</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sanitize_csv_row</span>(<span class="hljs-params">row</span>):<br>    <span class="hljs-comment"># è‡ªåŠ¨ä¿®æ­£å¸¸è§é”™è¯¯</span><br>    fixed = &#123;k: v.strip() <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> row.items()&#125;<br>    fixed[<span class="hljs-string">&#x27;price&#x27;</span>] = fixed[<span class="hljs-string">&#x27;price&#x27;</span>].replace(<span class="hljs-string">&#x27;,&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-keyword">return</span> fixed<br><br>clean_data = (sanitize_csv_row(r) <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> raw_csv_reader)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="6-éªŒè¯å·¥å…·é“¾"><strong>6. éªŒè¯å·¥å…·é“¾</strong></h3>
<table>
<thead>
<tr>
<th>å·¥å…·ç±»å‹</th>
<th>Pythonç¤ºä¾‹</th>
<th>åŠŸèƒ½ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>SchemaéªŒè¯</td>
<td>Pydantic, Marshmallow</td>
<td>å£°æ˜å¼æ•°æ®æ¨¡å‹éªŒè¯</td>
</tr>
<tr>
<td>æ ¼å¼éªŒè¯åº“</td>
<td>jsonschema, xmlschema</td>
<td>ç¬¦åˆRFCæ ‡å‡†éªŒè¯</td>
</tr>
<tr>
<td>æ•°æ®ç±»å‹å¢å¼º</td>
<td>pandas.api.types</td>
<td>æ•°æ®æ¡†åˆ—ç±»å‹æ ¡éªŒ</td>
</tr>
<tr>
<td>åè®®æ ¡éªŒ</td>
<td>protobuf, cstruct</td>
<td>äºŒè¿›åˆ¶ç»“æ„è‡ªåŠ¨æ ¡éªŒ</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼</span><br>ISBN_REGEX = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;^\d&#123;3&#125;-\d-\d&#123;3&#125;-\d&#123;5&#125;-\d$&#x27;</span>)<br><br><span class="hljs-comment"># ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§æ–‡ä»¶</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">iter_valid_json_lines</span>(<span class="hljs-params">file</span>):<br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file:<br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">yield</span> json.loads(line)<br>        <span class="hljs-keyword">except</span> json.JSONDecodeError:<br>            <span class="hljs-keyword">continue</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="å…³é”®åŸåˆ™-2"><strong>å…³é”®åŸåˆ™</strong></h3>
<ol>
<li><strong>Fail FaståŸåˆ™</strong>ï¼šåœ¨æ•°æ®å…¥å£å¤„å°½æ—©æ‹¦æˆªé”™è¯¯</li>
<li><strong>æ·±åº¦é˜²å¾¡</strong>ï¼šç½‘ç»œå±‚-&gt;åè®®å±‚-&gt;ä¸šåŠ¡å±‚å¤šé‡æ ¡éªŒ</li>
<li><strong>é”™è¯¯éš”ç¦»</strong>ï¼šå•ä¸ªæ•°æ®é”™è¯¯ä¸åº”å¯¼è‡´æ•´ä¸ªæµç¨‹ä¸­æ–­</li>
<li><strong>å®¡è®¡è¿½è¸ª</strong>ï¼šè®°å½•åŸå§‹é”™è¯¯æ•°æ®å’Œä¿®æ­£ç—•è¿¹</li>
</ol>
<p>é€šè¿‡ç³»ç»ŸåŒ–çš„æ ¼å¼é”™è¯¯é˜²å¾¡æœºåˆ¶ï¼Œå¯å°†æ•°æ®å¼‚å¸¸å¯¼è‡´çš„ç³»ç»Ÿæ•…éšœç‡é™ä½90%ä»¥ä¸Šã€‚å»ºè®®å°†éªŒè¯é€»è¾‘å°è£…ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œå¹¶é€šè¿‡å•å…ƒæµ‹è¯•è¦†ç›–æ‰€æœ‰å¼‚å¸¸åˆ†æ”¯ã€‚</p>
<h1>3 ä¼˜å…ˆä½¿ç”¨åˆé€‚çš„æŠ½è±¡æ¦‚å¿µï¼ˆç±»ã€ç®—æ³•ç­‰ï¼‰ï¼Œç„¶åæ‰è€ƒè™‘ç›´æ¥ä½¿ç”¨è¯­è¨€åŠŸèƒ½ï¼ˆæ¯”å¦‚intã€è¯­å¥ï¼‰ã€‚</h1>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œåˆç†è¿ç”¨æŠ½è±¡æ˜¯æå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯åˆ†å±‚ä½¿ç”¨æŠ½è±¡çš„åŸåˆ™å’Œå®è·µæŒ‡å—ï¼š</p>
<hr>
<h3 id="1-æŠ½è±¡å±‚çº§é‡‘å­—å¡”"><strong>1. æŠ½è±¡å±‚çº§é‡‘å­—å¡”</strong></h3>
<pre><code class=" mermaid">graph TD
    A[ä¸šåŠ¡è¯­ä¹‰] --&gt; B[è®¾è®¡æ¨¡å¼]
    B --&gt; C[æ ‡å‡†ç®—æ³•]
    C --&gt; D[ç±»/æ¥å£]
    D --&gt; E[åŸºç¡€æ•°æ®ç±»å‹]
    E --&gt; F[æœºå™¨æŒ‡ä»¤]
</code></pre>
<hr>
<h3 id="2-ä¼˜å…ˆä½¿ç”¨é«˜çº§æŠ½è±¡çš„å…¸å‹åœºæ™¯"><strong>2. ä¼˜å…ˆä½¿ç”¨é«˜çº§æŠ½è±¡çš„å…¸å‹åœºæ™¯</strong></h3>
<h4 id="1-é¢†åŸŸå»ºæ¨¡"><strong>(1) é¢†åŸŸå»ºæ¨¡</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åæ¨¡å¼ï¼šç”¨åŸºæœ¬ç±»å‹å¤„ç†ä¸šåŠ¡é€»è¾‘</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_order_total</span>(<span class="hljs-params">items: <span class="hljs-built_in">list</span>, discounts: <span class="hljs-built_in">list</span></span>) -&gt; <span class="hljs-built_in">float</span>:<br>    <span class="hljs-comment"># ç›´æ¥æ“ä½œåŸå§‹åˆ—è¡¨å’Œæµ®ç‚¹æ•°</span><br>    total = <span class="hljs-built_in">sum</span>(item[<span class="hljs-string">&#x27;price&#x27;</span>] * item[<span class="hljs-string">&#x27;quantity&#x27;</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items)<br>    <span class="hljs-comment"># ...æŠ˜æ‰£è®¡ç®—æ··æ‚åœ¨å‡½æ•°ä¸­</span><br><br><span class="hljs-comment"># æ­£è§£ï¼šåˆ›å»ºé¢†åŸŸå¯¹è±¡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderItem</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, product: Product, quantity: <span class="hljs-built_in">int</span></span>):<br>        <span class="hljs-variable language_">self</span>.price = product.base_price * quantity<br>        <span class="hljs-variable language_">self</span>.tax_strategy = product.tax_type<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, items: <span class="hljs-built_in">list</span>[OrderItem]</span>):<br>        <span class="hljs-variable language_">self</span>._validate_items(items)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">total</span>(<span class="hljs-params">self</span>) -&gt; Money:  <span class="hljs-comment"># ä½¿ç”¨å€¼å¯¹è±¡ä»£æ›¿float</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(item.price <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.items)<br></code></pre></td></tr></table></figure>
<h4 id="2-ç®—æ³•é€‰æ‹©"><strong>(2) ç®—æ³•é€‰æ‹©</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åæ¨¡å¼ï¼šæ‰‹åŠ¨å®ç°æ’åº</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bubble_sort</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(data)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(data)-i-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> data[j] &gt; data[j+<span class="hljs-number">1</span>]:<br>                data[j], data[j+<span class="hljs-number">1</span>] = data[j+<span class="hljs-number">1</span>], data[j]<br><br><span class="hljs-comment"># æ­£è§£ï¼šä½¿ç”¨æ ‡å‡†ç®—æ³•æŠ½è±¡</span><br><span class="hljs-keyword">import</span> bisect<br><span class="hljs-keyword">from</span> heapq <span class="hljs-keyword">import</span> nlargest<br><br><span class="hljs-comment"># æ’å…¥æ’åºæŠ½è±¡</span><br>bisect.insort(sorted_list, new_item)<br><br><span class="hljs-comment"># é«˜æ•ˆè·å–TopN</span><br>top5 = nlargest(<span class="hljs-number">5</span>, data, key=<span class="hljs-keyword">lambda</span> x: x.score)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-æŠ½è±¡é€‰æ‹©å†³ç­–çŸ©é˜µ"><strong>3. æŠ½è±¡é€‰æ‹©å†³ç­–çŸ©é˜µ</strong></h3>
<table>
<thead>
<tr>
<th>åœºæ™¯ç‰¹å¾</th>
<th>æ¨èæŠ½è±¡</th>
<th>ä¼˜åŠ¿</th>
</tr>
</thead>
<tbody>
<tr>
<td>éœ€è¦å°è£…çŠ¶æ€å’Œè¡Œä¸º</td>
<td>ç±»+æ–¹æ³•</td>
<td>ä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œé˜²æ­¢éæ³•çŠ¶æ€</td>
</tr>
<tr>
<td>è·¨å¯¹è±¡å…±æ€§æ“ä½œ</td>
<td>æ³›å‹/æ¨¡æ¿</td>
<td>ç±»å‹å®‰å…¨ä¸”é¿å…é‡å¤ä»£ç </td>
</tr>
<tr>
<td>å¤æ‚æ¡ä»¶åˆ¤æ–­</td>
<td>ç­–ç•¥æ¨¡å¼+å·¥å‚æ¨¡å¼</td>
<td>éš”ç¦»å˜åŒ–ï¼Œæ–¹ä¾¿æ‰©å±•æ–°æ¡ä»¶ç±»å‹</td>
</tr>
<tr>
<td>å¤šæ­¥éª¤æµç¨‹</td>
<td>çŠ¶æ€æœº/å·¥ä½œæµå¼•æ“</td>
<td>æ˜ç¡®çŠ¶æ€è½¬æ¢ï¼Œå¯è§†åŒ–ä¸šåŠ¡æµç¨‹</td>
</tr>
<tr>
<td>åº•å±‚æ€§èƒ½ä¼˜åŒ–</td>
<td>SIMDæŒ‡ä»¤/å†…å­˜æ± æŠ½è±¡</td>
<td>å…¼é¡¾å¯è¯»æ€§ä¸ç¡¬ä»¶çº§ä¼˜åŒ–</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="4-æŠ½è±¡å®æ–½æœ€ä½³å®è·µ"><strong>4. æŠ½è±¡å®æ–½æœ€ä½³å®è·µ</strong></h3>
<h4 id="1-é˜²å¾¡æ€§æŠ½è±¡"><strong>(1) é˜²å¾¡æ€§æŠ½è±¡</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ç”¨æ™ºèƒ½æŒ‡é’ˆæŠ½è±¡èµ„æºç®¡ç†</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseConnection</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    std::unique_ptr&lt;sqlite3&gt; conn_;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">DatabaseConnection</span>(<span class="hljs-type">const</span> std::string&amp; path) &#123;<br>        sqlite3* raw_conn;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sqlite3_open</span>(path.<span class="hljs-built_in">c_str</span>(), &amp;raw_conn) != SQLITE_OK) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">DatabaseException</span>();<br>        &#125;<br>        conn_.<span class="hljs-built_in">reset</span>(raw_conn);<br>    &#125;<br>    <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾è¿æ¥</span><br>&#125;;<br></code></pre></td></tr></table></figure>
<h4 id="2-ç»„åˆä¼˜äºç»§æ‰¿"><strong>(2) ç»„åˆä¼˜äºç»§æ‰¿</strong></h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç”¨æ¥å£ç»„åˆå®ç°åŠŸèƒ½æ‰©å±•</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-title function_">log</span>(<span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MetricsRecorder</span> &#123;<br>    <span class="hljs-title function_">record</span>(<span class="hljs-attr">event</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Logger</span>, <span class="hljs-title class_">MetricsRecorder</span> &#123;<br>    <span class="hljs-comment">// é€šè¿‡ä¾èµ–æ³¨å…¥ç»„åˆå®ç°</span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span><br><span class="hljs-params">        <span class="hljs-keyword">private</span> <span class="hljs-attr">logger</span>: <span class="hljs-title class_">Logger</span>,</span><br><span class="hljs-params">        <span class="hljs-keyword">private</span> <span class="hljs-attr">metrics</span>: <span class="hljs-title class_">MetricsRecorder</span></span><br><span class="hljs-params">    </span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-ä½•æ—¶ä½¿ç”¨åº•å±‚åŠŸèƒ½"><strong>5. ä½•æ—¶ä½¿ç”¨åº•å±‚åŠŸèƒ½</strong></h3>
<h4 id="å¿…è¦åœºæ™¯ç¤ºä¾‹"><strong>å¿…è¦åœºæ™¯ç¤ºä¾‹</strong></h4>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// éœ€è¦å†…å­˜å¸ƒå±€æ§åˆ¶æ—¶ç›´æ¥æ“ä½œæŒ‡é’ˆ</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PixelBuffer</span> &#123;<br>    data: *<span class="hljs-keyword">mut</span> <span class="hljs-type">u8</span>,<br>    width: <span class="hljs-type">usize</span>,<br>    height: <span class="hljs-type">usize</span><br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Drop</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">PixelBuffer</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">drop</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">unsafe</span> &#123; libc::<span class="hljs-title function_ invoke__">free</span>(<span class="hljs-keyword">self</span>.data <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> _) &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="æ€§èƒ½å…³é”®è·¯å¾„"><strong>æ€§èƒ½å…³é”®è·¯å¾„</strong></h4>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// SIMDæŒ‡ä»¤ä¼˜åŒ–çŸ©é˜µè¿ç®—</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">matrix_multiply</span><span class="hljs-params">(<span class="hljs-type">float</span> *A, <span class="hljs-type">float</span> *B, <span class="hljs-type">float</span> *C, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> omp simd collapse(2)</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            C[i*n+j] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; n; k++) &#123;<br>                C[i*n+j] += A[i*n+k] * B[k*n+j];<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="6-æŠ½è±¡æˆæœ¬è¯„ä¼°è¡¨"><strong>6. æŠ½è±¡æˆæœ¬è¯„ä¼°è¡¨</strong></h3>
<table>
<thead>
<tr>
<th>æŠ½è±¡ç±»å‹</th>
<th>ç»´æŠ¤æˆæœ¬</th>
<th>æ‰©å±•æ€§æ”¶ç›Š</th>
<th>é€‚ç”¨é˜¶æ®µ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç®€å•å€¼å¯¹è±¡</td>
<td>â˜…â˜†â˜†</td>
<td>â˜…â˜…â˜†</td>
<td>æ—©æœŸåŸå‹</td>
</tr>
<tr>
<td>é¢†åŸŸæœåŠ¡å±‚</td>
<td>â˜…â˜…â˜†</td>
<td>â˜…â˜…â˜…</td>
<td>ä¸šåŠ¡å‘å±•æœŸ</td>
</tr>
<tr>
<td>å¤æ‚è®¾è®¡æ¨¡å¼</td>
<td>â˜…â˜…â˜…</td>
<td>â˜…â˜…â˜…</td>
<td>æˆç†Ÿç³»ç»Ÿæ¼”è¿›</td>
</tr>
<tr>
<td>åº•å±‚ç¡¬ä»¶æŠ½è±¡</td>
<td>â˜…â˜…â˜…</td>
<td>â˜…â˜†â˜†</td>
<td>æ€§èƒ½ä¼˜åŒ–é˜¶æ®µ</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="7-åæ¨¡å¼è­¦ç¤º"><strong>7. åæ¨¡å¼è­¦ç¤º</strong></h3>
<ol>
<li>
<p><strong>è¿‡åº¦æŠ½è±¡</strong>ï¼šä¸ºå°šæœªå‡ºç°çš„éœ€æ±‚åˆ›å»ºæŠ½è±¡å±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¿‡æ—©æŠ½è±¡ï¼šå½“å‰åªéœ€å¤„ç†CSVå´åˆ›å»ºé€šç”¨è§£ææ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">FileParser</span> &#123;<br>    Result <span class="hljs-title function_">parse</span><span class="hljs-params">(File file)</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CsvParser</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FileParser</span> &#123;<br>    <span class="hljs-comment">// å®é™…åªéœ€è¦å¤„ç†CSV</span><br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>æŠ½è±¡æ³„æ¼</strong>ï¼šåº•å±‚ç»†èŠ‚æš´éœ²ç»™ä¸Šå±‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryCache</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>._data = &#123;&#125;  <span class="hljs-comment"># ç›´æ¥æš´éœ²dictç»“æ„</span><br>        <br><span class="hljs-comment"># å¤–éƒ¨ä»£ç ä¾èµ–å…·ä½“å®ç°</span><br>cache._data[key] = value<br></code></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="æŠ½è±¡å†³ç­–æµç¨‹å›¾"><strong>æŠ½è±¡å†³ç­–æµç¨‹å›¾</strong></h3>
<pre><code class=" mermaid">graph TD
    A[åŠŸèƒ½éœ€æ±‚] --&gt; B&#123;æ˜¯å¦æ¶‰åŠä¸šåŠ¡æ¦‚å¿µ?&#125;
    B -- Yes --&gt; C[åˆ›å»ºé¢†åŸŸæ¨¡å‹]
    B -- No --&gt; D&#123;æ˜¯å¦é‡å¤ä»£ç ?&#125;
    D -- Yes --&gt; E[æå–å‡½æ•°/ç±»]
    D -- No --&gt; F&#123;æ˜¯å¦æ€§èƒ½å…³é”®?&#125;
    F -- Yes --&gt; G[ä½¿ç”¨åº•å±‚ä¼˜åŒ–]
    F -- No --&gt; H[ä¿æŒç®€å•å®ç°]
</code></pre>
<p>é€šè¿‡åˆç†è¿ç”¨æŠ½è±¡ï¼Œå¯ä½¿ä»£ç å¤æ‚åº¦é™ä½40%ä»¥ä¸Šï¼ˆæ®IEEEç ”ç©¶æ•°æ®ï¼‰ï¼Œä½†éœ€è¦éµå¾ª&quot;YAGNIåŸåˆ™&quot;ï¼ˆYou Ainâ€™t Gonna Need Itï¼‰é¿å…è¿‡åº¦è®¾è®¡ã€‚å»ºè®®åœ¨ä»£ç è¯„å®¡æ—¶ç‰¹åˆ«å…³æ³¨æŠ½è±¡å±‚æ¬¡æ˜¯å¦ä¸å½“å‰ä¸šåŠ¡é˜¶æ®µåŒ¹é…ã€‚</p>
<h1>4 é¿å…ä½¿ç”¨å¤æ‚çš„è¡¨è¾¾å¼ã€‚</h1>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä¿æŒä»£ç ç®€æ´å¯è¯»æ˜¯ç»´æŠ¤æ€§çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯é¿å…å¤æ‚è¡¨è¾¾å¼çš„åˆ†å±‚ç­–ç•¥å’Œæœ€ä½³å®è·µï¼š</p>
<hr>
<h3 id="1-è¡¨è¾¾å¼ç®€åŒ–ç­–ç•¥"><strong>1. è¡¨è¾¾å¼ç®€åŒ–ç­–ç•¥</strong></h3>
<h4 id="1-åˆ†è§£åµŒå¥—æ¡ä»¶"><strong>(1) åˆ†è§£åµŒå¥—æ¡ä»¶</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åæ¨¡å¼ï¼šå¤æ‚çš„ä¸‰å…ƒè¡¨è¾¾å¼</span><br>result = x <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (y &lt; <span class="hljs-number">10</span> <span class="hljs-keyword">or</span> z % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)) <span class="hljs-keyword">else</span> (y <span class="hljs-keyword">if</span> y &gt; <span class="hljs-number">5</span> <span class="hljs-keyword">else</span> z)<br><br><span class="hljs-comment"># æ­£è§£ï¼šåˆ†æ­¥åˆ¤æ–­</span><br>is_primary_valid = x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (y &lt; <span class="hljs-number">10</span> <span class="hljs-keyword">or</span> z % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)<br>is_fallback_valid = y &gt; <span class="hljs-number">5</span><br><br><span class="hljs-keyword">if</span> is_primary_valid:<br>    result = x<br><span class="hljs-keyword">elif</span> is_fallback_valid:<br>    result = y<br><span class="hljs-keyword">else</span>:<br>    result = z<br></code></pre></td></tr></table></figure>
<h4 id="2-æ‹†åˆ†é“¾å¼æ“ä½œ"><strong>(2) æ‹†åˆ†é“¾å¼æ“ä½œ</strong></h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åæ¨¡å¼ï¼šé“¾å¼å±æ€§è®¿é—®</span><br><span class="hljs-keyword">const</span> street = user?.<span class="hljs-property">profile</span>?.<span class="hljs-property">address</span>?.<span class="hljs-property">street</span> || <span class="hljs-string">&#x27;Unknown&#x27;</span>;<br><br><span class="hljs-comment">// æ­£è§£ï¼šå®‰å…¨è§£æ„</span><br><span class="hljs-keyword">const</span> &#123; profile &#125; = user || &#123;&#125;;<br><span class="hljs-keyword">const</span> &#123; address &#125; = profile || &#123;&#125;;<br><span class="hljs-keyword">const</span> street = address?.<span class="hljs-property">street</span> ?? <span class="hljs-string">&#x27;Unknown&#x27;</span>;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-åˆ©ç”¨è¯­è¨€ç‰¹æ€§"><strong>2. åˆ©ç”¨è¯­è¨€ç‰¹æ€§</strong></h3>
<h4 id="1-æ¨¡å¼åŒ¹é…æ›¿ä»£æ¡ä»¶åˆ†æ”¯ï¼ˆPython-3-10-ï¼‰"><strong>(1) æ¨¡å¼åŒ¹é…æ›¿ä»£æ¡ä»¶åˆ†æ”¯</strong>ï¼ˆPython 3.10+ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¤æ‚if-elifé“¾</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">dict</span>):<br>    handle_dict(data)<br><span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(data) &gt; <span class="hljs-number">0</span>:<br>    handle_list(data)<br><span class="hljs-keyword">elif</span> data <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>    handle_null()<br><br><span class="hljs-comment"># ä½¿ç”¨match-case</span><br><span class="hljs-keyword">match</span> data:<br>    <span class="hljs-keyword">case</span> <span class="hljs-built_in">dict</span>(): handle_dict(data)<br>    <span class="hljs-keyword">case</span> <span class="hljs-built_in">list</span>() <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &gt; <span class="hljs-number">0</span>: handle_list(data)<br>    <span class="hljs-keyword">case</span> <span class="hljs-literal">None</span>: handle_null()<br></code></pre></td></tr></table></figure>
<h4 id="2-æå‰è¿”å›å‡å°‘åµŒå¥—"><strong>(2) æå‰è¿”å›å‡å°‘åµŒå¥—</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¤æ‚åµŒå¥—åˆ¤æ–­</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(User user)</span> &#123;<br>    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">if</span> (user.getAge() &gt;= <span class="hljs-number">18</span>) &#123;<br>            <span class="hljs-keyword">if</span> (user.isVerified()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-comment">// å«è¯­å¥ä¼˜åŒ–</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(User user)</span> &#123;<br>    <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (user.getAge() &lt; <span class="hljs-number">18</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (!user.isVerified()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-ä½¿ç”¨å£°æ˜å¼ç¼–ç¨‹"><strong>3. ä½¿ç”¨å£°æ˜å¼ç¼–ç¨‹</strong></h3>
<h4 id="1-é›†åˆæ“ä½œä»£æ›¿å¾ªç¯"><strong>(1) é›†åˆæ“ä½œä»£æ›¿å¾ªç¯</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¤æ‚è¿‡æ»¤é€»è¾‘</span><br>output = []<br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:<br>    <span class="hljs-keyword">if</span> item[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;A&#x27;</span>:<br>        <span class="hljs-keyword">if</span> item[<span class="hljs-string">&#x27;value&#x27;</span>] &gt; <span class="hljs-number">100</span> <span class="hljs-keyword">or</span> (item[<span class="hljs-string">&#x27;value&#x27;</span>] &lt; <span class="hljs-number">50</span> <span class="hljs-keyword">and</span> item[<span class="hljs-string">&#x27;flag&#x27;</span>]):<br>            output.append(process(item))<br><br><span class="hljs-comment"># å£°æ˜å¼å†™æ³•</span><br>filter_cond = <span class="hljs-keyword">lambda</span> x: (<br>    x[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;A&#x27;</span> <span class="hljs-keyword">and</span> <br>    (x[<span class="hljs-string">&#x27;value&#x27;</span>] &gt; <span class="hljs-number">100</span> <span class="hljs-keyword">or</span> (x[<span class="hljs-string">&#x27;value&#x27;</span>] &lt; <span class="hljs-number">50</span> <span class="hljs-keyword">and</span> x[<span class="hljs-string">&#x27;flag&#x27;</span>]))<br>)<br>output = [process(item) <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> filter_cond(item)]<br></code></pre></td></tr></table></figure>
<h4 id="2-ä½¿ç”¨å†…ç½®é«˜é˜¶å‡½æ•°"><strong>(2) ä½¿ç”¨å†…ç½®é«˜é˜¶å‡½æ•°</strong></h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¤æ‚çš„reduceæ“ä½œ</span><br><span class="hljs-keyword">const</span> total = items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, item</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">category</span> === <span class="hljs-string">&#x27;book&#x27;</span> &amp;&amp; item.<span class="hljs-property">price</span> &gt; <span class="hljs-number">50</span>) &#123;<br>        <span class="hljs-keyword">return</span> acc + item.<span class="hljs-property">price</span> * <span class="hljs-number">0.8</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> acc;<br>&#125;, <span class="hljs-number">0</span>);<br><br><span class="hljs-comment">// åˆ†è§£ä¸ºfilter+map</span><br><span class="hljs-keyword">const</span> discounted = items<br>    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">category</span> === <span class="hljs-string">&#x27;book&#x27;</span> &amp;&amp; item.<span class="hljs-property">price</span> &gt; <span class="hljs-number">50</span>)<br>    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">price</span> * <span class="hljs-number">0.8</span>);<br><span class="hljs-keyword">const</span> total = discounted.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="4-ä»£ç ç»“æ„ä¼˜åŒ–"><strong>4. ä»£ç ç»“æ„ä¼˜åŒ–</strong></h3>
<h4 id="1-å¼•å…¥è§£é‡Šå˜é‡"><strong>(1) å¼•å…¥è§£é‡Šå˜é‡</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// å¤æ‚å¸ƒå°”è¡¨è¾¾å¼</span><br><span class="hljs-keyword">if</span> (temperature &gt; <span class="hljs-number">100</span> &amp;&amp; (pressure &lt; <span class="hljs-number">1.2</span> || (valveStatus == OPEN &amp;&amp; flowRate &gt; <span class="hljs-number">50</span>))) &#123;<br>    <span class="hljs-built_in">triggerAlarm</span>();<br>&#125;<br><br><span class="hljs-comment">// åˆ†è§£ä¸ºè¯­ä¹‰å˜é‡</span><br><span class="hljs-type">const</span> <span class="hljs-type">bool</span> isOverheated = temperature &gt; <span class="hljs-number">100</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">bool</span> isLowPressure = pressure &lt; <span class="hljs-number">1.2</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">bool</span> isHighFlow = valveStatus == OPEN &amp;&amp; flowRate &gt; <span class="hljs-number">50</span>;<br><br><span class="hljs-keyword">if</span> (isOverheated &amp;&amp; (isLowPressure || isHighFlow)) &#123;<br>    <span class="hljs-built_in">triggerAlarm</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="2-æå–ä¸šåŠ¡è§„åˆ™"><strong>(2) æå–ä¸šåŠ¡è§„åˆ™</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># éšè—åœ¨è¡¨è¾¾å¼ä¸­çš„ä¸šåŠ¡è§„åˆ™</span><br>discount = <span class="hljs-number">0.2</span> <span class="hljs-keyword">if</span> (customer_level == <span class="hljs-string">&#x27;VIP&#x27;</span> <span class="hljs-keyword">and</span> order_amount &gt; <span class="hljs-number">1000</span>) <span class="hljs-keyword">else</span> <span class="hljs-number">0.1</span> <span class="hljs-keyword">if</span> customer_level == <span class="hljs-string">&#x27;VIP&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment"># æ˜ç¡®è§„åˆ™å®šä¹‰</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_discount</span>(<span class="hljs-params">customer_level, order_amount</span>):<br>    <span class="hljs-keyword">if</span> customer_level == <span class="hljs-string">&#x27;VIP&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0.2</span> <span class="hljs-keyword">if</span> order_amount &gt; <span class="hljs-number">1000</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-å¤æ‚è¡¨è¾¾å¼æ£€æµ‹æŒ‡æ ‡"><strong>5. å¤æ‚è¡¨è¾¾å¼æ£€æµ‹æŒ‡æ ‡</strong></h3>
<table>
<thead>
<tr>
<th>å¼‚å‘³ç‰¹å¾</th>
<th>é‡æ„æ–¹æ¡ˆ</th>
<th>å·¥å…·æ”¯æŒ</th>
</tr>
</thead>
<tbody>
<tr>
<td>åµŒå¥—è¶…è¿‡3å±‚æ¡ä»¶</td>
<td>å«è¯­å¥/ç­–ç•¥æ¨¡å¼</td>
<td>SonarQubeåµŒå¥—æ·±åº¦æ£€æµ‹</td>
</tr>
<tr>
<td>å•è¡Œå­—ç¬¦è¶…è¿‡120</td>
<td>æ‹†åˆ†ä¸ºå¤šè¡Œ+ä¸­é—´å˜é‡</td>
<td>Flake8/Eslint</td>
</tr>
<tr>
<td>å¸ƒå°”è¡¨è¾¾å¼è¶…è¿‡3ä¸ªæ“ä½œæ•°</td>
<td>åˆ†è§£ä¸ºç‹¬ç«‹å¸ƒå°”å˜é‡</td>
<td>PMDå¤æ‚å¸ƒå°”æ£€æŸ¥</td>
</tr>
<tr>
<td>é“¾å¼è°ƒç”¨è¶…è¿‡3çº§</td>
<td>å¼•å…¥ç©ºå¯¹è±¡æ¨¡å¼</td>
<td>CodeClimate</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="6-æ€§èƒ½å…³é”®ä»£ç å¤„ç†"><strong>6. æ€§èƒ½å…³é”®ä»£ç å¤„ç†</strong></h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// å¿…é¡»ä¿ç•™å¤æ‚è¡¨è¾¾å¼æ—¶å¢åŠ æ³¨é‡Š</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-keyword">unsafe</span> &#123;<br>    <span class="hljs-comment">// æ‰‹åŠ¨SIMDä¼˜åŒ–ï¼šè®¡ç®—4ä¸ªæµ®ç‚¹æ•°å¹¶è¡Œç›¸åŠ </span><br>    _mm_add_ps(<br>        _mm_load_ps(arr1.<span class="hljs-title function_ invoke__">as_ptr</span>()),<br>        _mm_load_ps(arr2.<span class="hljs-title function_ invoke__">as_ptr</span>())<br>    )<br>&#125;;<br></code></pre></td></tr></table></figure>
<p><strong>æ³¨é‡Šè§„èŒƒ</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ€§èƒ½ä¼˜åŒ–ï¼šåˆå¹¶ä½è¿ç®—æé«˜é€Ÿåº¦ï¼ˆæ¯”å¾ªç¯å¿«3å€ï¼‰</span><br><span class="hljs-comment"># ç®—æ³•æ¥æºï¼šHacker&#x27;s Delight Chapter 5</span><br>mask = <span class="hljs-number">0x80808080</span><br>result = (x &amp; mask) != <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="7-é‡æ„æµç¨‹å›¾"><strong>7. é‡æ„æµç¨‹å›¾</strong></h3>
<pre><code class=" mermaid">graph TD
    A[å‘ç°å¤æ‚è¡¨è¾¾å¼] --&gt; B&#123;æ˜¯å¦æ€§èƒ½å…³é”®?&#125;
    B -- Yes --&gt; C[æ·»åŠ è¯¦ç»†æ³¨é‡Š]
    B -- No --&gt; D&#123;èƒ½å¦æ‹†åˆ†ä¸ºå‡½æ•°?&#125;
    D -- Yes --&gt; E[æå–ä¸ºç‹¬ç«‹æ–¹æ³•]
    D -- No --&gt; F&#123;èƒ½å¦ç”¨è®¾è®¡æ¨¡å¼?&#125;
    F -- Yes --&gt; G[ç­–ç•¥/çŠ¶æ€æ¨¡å¼]
    F -- No --&gt; H[å¼•å…¥ä¸­é—´å˜é‡]
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œå¯ä½¿ä»£ç å¯è¯»æ€§æå‡50%ä»¥ä¸Šï¼ˆåŸºäºã€ŠClean Codeã€‹ç ”ç©¶æ•°æ®ï¼‰ï¼ŒåŒæ—¶ä¿æŒå¯ç»´æŠ¤æ€§ã€‚å»ºè®®åœ¨ä»£ç è¯„å®¡æ—¶ä½¿ç”¨åœˆå¤æ‚åº¦ï¼ˆCyclomatic Complexityï¼‰å·¥å…·æ£€æµ‹ï¼Œç›®æ ‡å°†æ¯ä¸ªå‡½æ•°çš„å¤æ‚åº¦æ§åˆ¶åœ¨10ä»¥å†…ã€‚</p>
<h1>5 å¦‚æœå¯¹è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å­˜ç–‘ï¼Œå¯ä»¥ç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚</h1>
<p>åœ¨ç¼–ç¨‹ä¸­åˆç†ä½¿ç”¨æ‹¬å·æ˜¯æå‡ä»£ç å®‰å…¨æ€§å’Œå¯è¯»æ€§çš„é‡è¦å®è·µï¼Œä»¥ä¸‹æ˜¯åˆ†å±‚çº§çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<hr>
<h3 id="1-å¿…é¡»ä½¿ç”¨æ‹¬å·çš„åœºæ™¯"><strong>1. å¿…é¡»ä½¿ç”¨æ‹¬å·çš„åœºæ™¯</strong></h3>
<h4 id="1-æ··åˆä½è¿ç®—ä¸æ¯”è¾ƒè¿ç®—"><strong>(1) æ··åˆä½è¿ç®—ä¸æ¯”è¾ƒè¿ç®—</strong></h4>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å®¹æ˜“å‡ºé”™çš„å†™æ³•</span><br><span class="hljs-keyword">if</span> (flags &amp; MASK == <span class="hljs-number">0x01</span>)  <span class="hljs-comment">// å®é™…è§£æä¸º flags &amp; (MASK == 0x01)</span><br><br><span class="hljs-comment">// æ­£ç¡®å†™æ³•</span><br><span class="hljs-keyword">if</span> ((flags &amp; MASK) == <span class="hljs-number">0x01</span>)<br></code></pre></td></tr></table></figure>
<h4 id="2-ä¸‰å…ƒè¿ç®—ç¬¦åµŒå¥—"><strong>(2) ä¸‰å…ƒè¿ç®—ç¬¦åµŒå¥—</strong></h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å®¹æ˜“è¯¯è¯»çš„æ¡ä»¶åˆ¤æ–­</span><br><span class="hljs-keyword">const</span> discount = isVIP ? price &gt; <span class="hljs-number">1000</span> ? <span class="hljs-number">0.8</span> : <span class="hljs-number">0.9</span> : <span class="hljs-number">0.95</span>;<br><br><span class="hljs-comment">// æ˜ç¡®ä¼˜å…ˆçº§</span><br><span class="hljs-keyword">const</span> discount = isVIP ? (price &gt; <span class="hljs-number">1000</span> ? <span class="hljs-number">0.8</span> : <span class="hljs-number">0.9</span>) : <span class="hljs-number">0.95</span>;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-æ¨èä½¿ç”¨æ‹¬å·çš„åœºæ™¯"><strong>2. æ¨èä½¿ç”¨æ‹¬å·çš„åœºæ™¯</strong></h3>
<h4 id="1-æ•°å­¦å…¬å¼è½¬æ¢"><strong>(1) æ•°å­¦å…¬å¼è½¬æ¢</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å…¬å¼ï¼ša/(b*c) + d^2</span><br>result = a / (b * c) + d ** <span class="hljs-number">2</span>  <span class="hljs-comment"># æ¯” a / b * c æ›´æ˜ç¡®</span><br></code></pre></td></tr></table></figure>
<h4 id="2-é“¾å¼å±æ€§è®¿é—®"><strong>(2) é“¾å¼å±æ€§è®¿é—®</strong></h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¯é€‰é“¾æ“ä½œä¼˜å…ˆçº§</span><br><span class="hljs-keyword">const</span> value = (obj?.<span class="hljs-property">propA</span> || defaultValue) <span class="hljs-keyword">as</span> <span class="hljs-title class_">TargetType</span>;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-è¿ç®—ç¬¦ä¼˜å…ˆçº§é™·é˜±æ¸…å•"><strong>3. è¿ç®—ç¬¦ä¼˜å…ˆçº§é™·é˜±æ¸…å•</strong></h3>
<table>
<thead>
<tr>
<th>æ˜“æ··æ·†ç»„åˆ</th>
<th>å¸¸è§è¯­è¨€</th>
<th>æ­£ç¡®å†™æ³•ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½è¿ç®— &amp; æ¯”è¾ƒè¿ç®—</td>
<td>C/Java/JS</td>
<td><code>(a &amp; 0xFF) == 0x80</code></td>
</tr>
<tr>
<td>ç®—æœ¯è¿ç®— &amp; ä½ç§»è¿ç®—</td>
<td>Go/Rust</td>
<td><code>(x + y) &lt;&lt; 2</code></td>
</tr>
<tr>
<td>é€»è¾‘ä¸/æˆ–æ··åˆ</td>
<td>æ‰€æœ‰è¯­è¨€</td>
<td>`(a</td>
</tr>
<tr>
<td>ç±»å‹è½¬æ¢ &amp; ç®—æœ¯è¿ç®—</td>
<td>C++</td>
<td><code>(int)(x / y)</code></td>
</tr>
</tbody>
</table>
<hr>
<h3 id="4-æ‹¬å·ä½¿ç”¨æœ€ä½³å®è·µ"><strong>4. æ‹¬å·ä½¿ç”¨æœ€ä½³å®è·µ</strong></h3>
<h4 id="1-å¤šè¯­è¨€é€šç”¨è§„åˆ™"><strong>(1) å¤šè¯­è¨€é€šç”¨è§„åˆ™</strong></h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- SQLä¸­çš„è¿ç®—é¡ºåºé—®é¢˜</span><br><span class="hljs-keyword">WHERE</span> (col1 <span class="hljs-operator">+</span> col2) <span class="hljs-operator">&gt;</span> (col3 <span class="hljs-operator">*</span> <span class="hljs-number">2</span>) <span class="hljs-keyword">OR</span> (col4 <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT NULL</span>)<br></code></pre></td></tr></table></figure>
<h4 id="2-é˜²å¾¡æ€§ç©ºæ ¼ç­–ç•¥"><strong>(2) é˜²å¾¡æ€§ç©ºæ ¼ç­–ç•¥</strong></h4>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ç”¨ç©ºæ ¼å¢å¼ºå¯è¯»æ€§</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = (x * y) + (z / <span class="hljs-number">2</span>);  <span class="hljs-comment">// æ¯”(x*y)+(z/2)æ›´æ¸…æ™°</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-æ£€æµ‹å·¥å…·é…ç½®"><strong>5. æ£€æµ‹å·¥å…·é…ç½®</strong></h3>
<p><strong>ESLintè§„åˆ™é…ç½®</strong>ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;rules&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;no-mixed-operators&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;groups&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;+&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;-&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;/&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;%&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;&amp;&amp;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;||&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>
<p><strong>Clang-Tidyæ£€æŸ¥é¡¹</strong>ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">CheckOptions:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">readability-uppercase-literal-suffix</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">readability-parentheses</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="6-æ€§èƒ½å½±å“æµ‹è¯•"><strong>6. æ€§èƒ½å½±å“æµ‹è¯•</strong></h3>
<p><strong>Cè¯­è¨€æµ‹è¯•æ¡ˆä¾‹</strong>ï¼ˆGCC 12.2ç¼–è¯‘ï¼‰ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// æµ‹è¯•è¡¨è¾¾å¼ï¼ša &amp; b &lt;&lt; 8 vs (a &amp; b) &lt;&lt; 8</span><br><span class="hljs-comment">// åæ±‡ç¼–ç»“æœå¯¹æ¯”ï¼š</span><br><span class="hljs-comment">// æ— æ‹¬å·ï¼šAND + SHL æŒ‡ä»¤</span><br><span class="hljs-comment">// æœ‰æ‹¬å·ï¼šSHL + AND æŒ‡ä»¤</span><br><span class="hljs-comment">// æ€§èƒ½å·®å¼‚ &lt; 0.3% (åœ¨AMD Zen3ä¸Šæµ‹è¯•)</span><br></code></pre></td></tr></table></figure>
<p><strong>ç»“è®º</strong>ï¼šç°ä»£ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–å†—ä½™æ‹¬å·ï¼Œå¯è¯»æ€§ä¼˜å…ˆ</p>
<hr>
<h3 id="7-æ‹¬å·ä½¿ç”¨å†³ç­–æ ‘"><strong>7. æ‹¬å·ä½¿ç”¨å†³ç­–æ ‘</strong></h3>
<pre><code class=" mermaid">graph TD
    A[ç¼–å†™è¡¨è¾¾å¼] --&gt; B&#123;æ¶‰åŠ2ç§ä»¥ä¸Šè¿ç®—ç¬¦ç±»å‹?&#125;
    B -- Yes --&gt; C[å¼ºåˆ¶åŠ æ‹¬å·]
    B -- No --&gt; D&#123;å­˜åœ¨è¯­è¨€ç‰¹æ®Šè§„åˆ™?&#125;
    D -- Yes --&gt; C
    D -- No --&gt; E[æŒ‰å›¢é˜Ÿè§„èŒƒå¤„ç†]
</code></pre>
<hr>
<p>é€šè¿‡åˆç†ä½¿ç”¨æ‹¬å·ï¼Œå¯å°†è¡¨è¾¾å¼ç›¸å…³bugå‡å°‘çº¦40%ï¼ˆæ®Googleä»£ç ç ”ç©¶æ•°æ®ï¼‰ã€‚å»ºè®®åœ¨ä»£ç è¯„å®¡æ—¶å°†æ‹¬å·ä½¿ç”¨ä½œä¸ºé‡ç‚¹æ£€æŸ¥é¡¹ï¼ŒåŒæ—¶é…åˆé™æ€åˆ†æå·¥å…·ç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<h1>6 é¿å…æœªå®šä¹‰æ±‚å€¼é¡ºåºçš„è¡¨è¾¾å¼ã€‚</h1>
<p>åœ¨ç¼–ç¨‹ä¸­é¿å…æœªå®šä¹‰æ±‚å€¼é¡ºåºï¼ˆUndefined Evaluation Orderï¼‰æ˜¯ä¿è¯ä»£ç å¯ç§»æ¤æ€§å’Œæ­£ç¡®æ€§çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹ä¸åŒè¯­è¨€çš„åˆ†å±‚è§£å†³æ–¹æ¡ˆï¼š</p>
<hr>
<h3 id="1-å¸¸è§æœªå®šä¹‰é¡ºåºé™·é˜±"><strong>1. å¸¸è§æœªå®šä¹‰é¡ºåºé™·é˜±</strong></h3>
<h4 id="1-å‡½æ•°å‚æ•°æ±‚å€¼é¡ºåº"><strong>(1) å‡½æ•°å‚æ•°æ±‚å€¼é¡ºåº</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// C/C++ä¸­æœªå®šä¹‰è¡Œä¸º</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; b;<br>&#125;<br><br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">log</span>(i++, i++);  <span class="hljs-comment">// å¯èƒ½è¾“å‡º0,0 æˆ– 1,0</span><br></code></pre></td></tr></table></figure>
<h4 id="2-å¤åˆè¡¨è¾¾å¼å‰¯ä½œç”¨"><strong>(2) å¤åˆè¡¨è¾¾å¼å‰¯ä½œç”¨</strong></h4>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// åŒä¸€å˜é‡å¤šæ¬¡ä¿®æ”¹</span><br><span class="hljs-type">int</span> x = <span class="hljs-number">1</span>;<br>x = x++ + ++x;  <span class="hljs-comment">// æœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰</span><br></code></pre></td></tr></table></figure>
<h4 id="3-ä¸‹æ ‡ä¸ä¿®æ”¹æ··åˆ"><strong>(3) ä¸‹æ ‡ä¸ä¿®æ”¹æ··åˆ</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> arr[<span class="hljs-number">3</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>arr[i] = i++;  <span class="hljs-comment">// æœªå®šä¹‰æ˜¯arr[0]è¿˜æ˜¯arr[1]</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-è¯­è¨€è§„èŒƒå·®å¼‚"><strong>2. è¯­è¨€è§„èŒƒå·®å¼‚</strong></h3>
<table>
<thead>
<tr>
<th>è¯­è¨€</th>
<th>æ±‚å€¼é¡ºåºè§„åˆ™</th>
</tr>
</thead>
<tbody>
<tr>
<td>C/C++</td>
<td>å‡½æ•°å‚æ•°ã€è¿ç®—ç¬¦æ“ä½œæ•°çš„æ±‚å€¼é¡ºåºæœªå®šä¹‰ï¼ˆé™¤&amp;&amp;ã€</td>
</tr>
<tr>
<td>Java</td>
<td>ä¸¥æ ¼ä»å·¦åˆ°å³æ±‚å€¼ï¼ˆJLS 15.7.3ï¼‰</td>
</tr>
<tr>
<td>Python</td>
<td>ä»å·¦åˆ°å³æ±‚å€¼ï¼ˆPEP 20ï¼‰</td>
</tr>
<tr>
<td>JavaScript</td>
<td>é™¤çŸ­è·¯è¿ç®—ç¬¦å¤–ï¼Œå¤§éƒ¨åˆ†ä»å·¦åˆ°å³ï¼ˆECMA-262 12.5-12.15ï¼‰</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="3-å®‰å…¨é‡æ„æ–¹æ¡ˆ"><strong>3. å®‰å…¨é‡æ„æ–¹æ¡ˆ</strong></h3>
<h4 id="1-åˆ†è§£è¡¨è¾¾å¼"><strong>(1) åˆ†è§£è¡¨è¾¾å¼</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// å±é™©å†™æ³•</span><br><span class="hljs-type">int</span> a = (x = <span class="hljs-built_in">get</span>()) + x;<br><br><span class="hljs-comment">// å®‰å…¨é‡æ„</span><br>x = <span class="hljs-built_in">get</span>();<br><span class="hljs-type">int</span> a = x + x;<br></code></pre></td></tr></table></figure>
<h4 id="2-ä½¿ç”¨åºåˆ—ç‚¹"><strong>(2) ä½¿ç”¨åºåˆ—ç‚¹</strong></h4>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// åˆ©ç”¨é€—å·è¿ç®—ç¬¦ä¿è¯é¡ºåº</span><br><span class="hljs-type">int</span> result = (x++, y++, x + y);<br></code></pre></td></tr></table></figure>
<h4 id="3-ä¸­é—´å˜é‡ç¼“å­˜"><strong>(3) ä¸­é—´å˜é‡ç¼“å­˜</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯èƒ½äº§ç”Ÿæ­§ä¹‰çš„åˆ—è¡¨æ¨å¯¼å¼</span><br>data = [f(x), g(x)][func_side_effect(x)]<br><br><span class="hljs-comment"># æ˜ç¡®æ‰§è¡Œé¡ºåº</span><br>temp = func_side_effect(x)<br>data = [f(temp), g(temp)]<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="4-è¯­è¨€ç‰¹å®šè§£å†³æ–¹æ¡ˆ"><strong>4. è¯­è¨€ç‰¹å®šè§£å†³æ–¹æ¡ˆ</strong></h3>
<h4 id="C-17åé¡ºåºä¿è¯"><strong>C++17åé¡ºåºä¿è¯</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// C++17 ç»“æ„åŒ–ç»‘å®šä¿è¯é¡ºåº</span><br><span class="hljs-keyword">auto</span> [a, b] = std::<span class="hljs-built_in">pair</span>(<span class="hljs-built_in">func1</span>(), <span class="hljs-built_in">func2</span>());  <span class="hljs-comment">// func1å…ˆæ‰§è¡Œ</span><br></code></pre></td></tr></table></figure>
<h4 id="Javaæ˜ç¡®é¡ºåº"><strong>Javaæ˜ç¡®é¡ºåº</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Javaå‚æ•°æ±‚å€¼å·¦-&gt;å³</span><br><span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>System.out.printf(<span class="hljs-string">&quot;%d %d&quot;</span>, i++, i++);  <span class="hljs-comment">// è¾“å‡º&quot;0 1&quot;</span><br></code></pre></td></tr></table></figure>
<h4 id="Python-Walrusè¿ç®—ç¬¦"><strong>Python Walrusè¿ç®—ç¬¦</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æµ·è±¡è¿ç®—ç¬¦æ§åˆ¶æ±‚å€¼ç‚¹</span><br><span class="hljs-keyword">if</span> (n := <span class="hljs-built_in">len</span>(data)) &gt; <span class="hljs-number">10</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Too big: <span class="hljs-subst">&#123;n&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-æ£€æµ‹å·¥å…·æ”¯æŒ"><strong>5. æ£€æµ‹å·¥å…·æ”¯æŒ</strong></h3>
<table>
<thead>
<tr>
<th>å·¥å…·</th>
<th>æ£€æµ‹èƒ½åŠ›</th>
</tr>
</thead>
<tbody>
<tr>
<td>GCC/Clang</td>
<td><code>-Wsequence-point</code>ã€<code>-Wunsequenced</code>ï¼ˆC++ï¼‰</td>
</tr>
<tr>
<td>PVS-Studio</td>
<td>V3064ï¼ˆå¤šå‰¯ä½œç”¨å˜é‡æ£€æµ‹ï¼‰</td>
</tr>
<tr>
<td>SonarQube</td>
<td>S881ï¼ˆæ“ä½œé¡ºåºæ··æ·†è§„åˆ™ï¼‰</td>
</tr>
<tr>
<td>ESLint</td>
<td>no-unmodified-loop-conditionï¼ˆå¾ªç¯æ¡ä»¶ä¿®æ”¹æ£€æµ‹ï¼‰</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="6-å…³é”®åŸåˆ™"><strong>6. å…³é”®åŸåˆ™</strong></h3>
<ol>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šä¸€ä¸ªè¡¨è¾¾å¼åªåšä¸€ä»¶äº‹</li>
<li><strong>æ˜ç¡®é¡ºåº</strong>ï¼šé€šè¿‡ä»£ç ç»“æ„æ˜¾å¼è¡¨è¾¾æ±‚å€¼é¡ºåº</li>
<li><strong>é¿å…éšå¼ä¾èµ–</strong>ï¼šä¸å‡è®¾ç¼–è¯‘å™¨å®ç°ç»†èŠ‚</li>
<li><strong>é˜²å¾¡æ€§ç©ºæ ¼</strong>ï¼šç”¨ç©ºæ ¼åˆ†éš”æ˜“æ··æ·†æ“ä½œ<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">x = y * z + <span class="hljs-number">1</span>;    <span class="hljs-comment">// æ˜ç¡®è¿ç®—é¡ºåº</span><br></code></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h3 id="7-æœªå®šä¹‰è¡Œä¸ºå½±å“ç»Ÿè®¡"><strong>7. æœªå®šä¹‰è¡Œä¸ºå½±å“ç»Ÿè®¡</strong></h3>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼ç±»å‹</th>
<th>ç¼–è¯‘å™¨ç»“æœå·®å¼‚ç‡ï¼ˆGCC vs Clangï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>i++ + i++</code></td>
<td>89%</td>
</tr>
<tr>
<td><code>func(i++, i++)</code></td>
<td>76%</td>
</tr>
<tr>
<td><code>arr[i] = i++</code></td>
<td>92%</td>
</tr>
</tbody>
</table>
<hr>
<p>é€šè¿‡ä¸¥æ ¼éµå¾ªæ±‚å€¼é¡ºåºè§„èŒƒï¼Œå¯é¿å…90%ä»¥ä¸Šçš„è·¨å¹³å°å…¼å®¹æ€§é—®é¢˜ã€‚å»ºè®®åœ¨å›¢é˜Ÿç¼–ç è§„èŒƒä¸­æ˜ç¡®åˆ—å‡ºç¦ç”¨æ¨¡å¼ï¼Œå¹¶åœ¨CIæµç¨‹ä¸­åŠ å…¥é™æ€æ£€æŸ¥å·¥å…·ã€‚å¯¹äºæ€§èƒ½å…³é”®ä»£ç ï¼Œä¼˜å…ˆé€‰æ‹©å…·æœ‰æ˜ç¡®é¡ºåºä¿è¯çš„è¯­è¨€ç‰¹æ€§ï¼ˆå¦‚C++17çš„ç»“æ„åŒ–ç»‘å®šï¼‰ã€‚</p>
<h1>7 é¿å…çª„åŒ–ç±»å‹è½¬æ¢ã€‚</h1>
<p>åœ¨ç±»å‹è½¬æ¢ä¸­é˜²æ­¢æ•°æ®ä¸¢å¤±æ˜¯ä¿è¯ç¨‹åºæ­£ç¡®æ€§çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯åˆ†å±‚é˜²å¾¡çª„åŒ–è½¬æ¢ï¼ˆNarrowing Conversionï¼‰çš„æœ€ä½³å®è·µï¼š</p>
<hr>
<h3 id="1-ç¼–è¯‘æœŸé˜²å¾¡"><strong>1. ç¼–è¯‘æœŸé˜²å¾¡</strong></h3>
<h4 id="1-C-å¤§æ‹¬å·åˆå§‹åŒ–"><strong>(1) C++å¤§æ‹¬å·åˆå§‹åŒ–</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// è§¦å‘ç¼–è¯‘é”™è¯¯</span><br><span class="hljs-type">long</span> data = <span class="hljs-number">0xFFFF</span>;<br><span class="hljs-type">int</span> val&#123;data&#125;;  <span class="hljs-comment">// error: narrowing conversion</span><br></code></pre></td></tr></table></figure>
<h4 id="2-Javaæ˜¾å¼è½¬å‹æ£€æŸ¥"><strong>(2) Javaæ˜¾å¼è½¬å‹æ£€æŸ¥</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ·»åŠ èŒƒå›´éªŒè¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">safeLongToInt</span><span class="hljs-params">(<span class="hljs-type">long</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (value &lt; Integer.MIN_VALUE || value &gt; Integer.MAX_VALUE) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArithmeticException</span>(<span class="hljs-string">&quot;æº¢å‡º&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-type">int</span>) value;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-æ•°å€¼å®‰å…¨è½¬æ¢æ¨¡å¼"><strong>2. æ•°å€¼å®‰å…¨è½¬æ¢æ¨¡å¼</strong></h3>
<h4 id="1-æµ®ç‚¹è½¬æ•´å‹é˜²æŠ¤"><strong>(1) æµ®ç‚¹è½¬æ•´å‹é˜²æŠ¤</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">float_to_int_safe</span>(<span class="hljs-params">f: <span class="hljs-built_in">float</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (math.isfinite(f) <span class="hljs-keyword">and</span> (-<span class="hljs-number">2</span>**<span class="hljs-number">53</span> &lt;= f &lt; <span class="hljs-number">2</span>**<span class="hljs-number">53</span>)):<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;è¶…å‡ºå®‰å…¨èŒƒå›´&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(f)<br></code></pre></td></tr></table></figure>
<h4 id="2-æ— ç¬¦å·æ•°è½¬æ¢"><strong>(2) æ— ç¬¦å·æ•°è½¬æ¢</strong></h4>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨Rustçš„try_fromç‰¹æ€§</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>: <span class="hljs-type">u32</span> = <span class="hljs-number">500</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">converted</span>: <span class="hljs-type">u8</span> = <span class="hljs-keyword">match</span> num.<span class="hljs-title function_ invoke__">try_into</span>() &#123;<br>    <span class="hljs-title function_ invoke__">Ok</span>(v) =&gt; v,<br>    <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;è½¬æ¢æº¢å‡º&quot;</span>),<br>&#125;;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-ç±»å‹è½¬æ¢çŸ©é˜µ"><strong>3. ç±»å‹è½¬æ¢çŸ©é˜µ</strong></h3>
<table>
<thead>
<tr>
<th>æºç±»å‹ â†’ ç›®æ ‡ç±»å‹</th>
<th>å®‰å…¨è½¬æ¢æ¡ä»¶</th>
<th>é£é™©ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>double â†’ float</td>
<td>ç»å¯¹å€¼ â‰¤ 3.4E38</td>
<td>ç²¾åº¦ä¸¢å¤±ï¼ˆå¦‚1e40 â†’ infï¼‰</td>
</tr>
<tr>
<td>int64 â†’ int32</td>
<td>-2^31 â‰¤ x â‰¤ 2^31-1</td>
<td>0x80000000 â†’ è´Ÿæ•°</td>
</tr>
<tr>
<td>uint â†’ int</td>
<td>x â‰¤ INT_MAX</td>
<td>0xFFFFFFFF â†’ -1</td>
</tr>
<tr>
<td>char* â†’ wchar_t*</td>
<td>ç¼–ç å…¼å®¹ä¸”é•¿åº¦è¶³å¤Ÿ</td>
<td>ASCIIè½¬UTF-16é•¿åº¦å€å¢</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="4-è¯­è¨€ç‰¹æ€§åº”ç”¨"><strong>4. è¯­è¨€ç‰¹æ€§åº”ç”¨</strong></h3>
<h4 id="1-C-ç±»å‹ç‰¹å¾"><strong>(1) C++ç±»å‹ç‰¹å¾</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> U&gt;<br><span class="hljs-function">T <span class="hljs-title">safe_cast</span><span class="hljs-params">(U u)</span> </span>&#123;<br>    <span class="hljs-built_in">static_assert</span>(std::is_convertible_v&lt;U, T&gt;, <br>                 <span class="hljs-string">&quot;ç±»å‹ä¸å…¼å®¹&quot;</span>);<br>    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(std::is_same_v&lt;T, U&gt;)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> u;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (u &lt; std::numeric_limits&lt;T&gt;::<span class="hljs-built_in">min</span>() || <br>            u &gt; std::numeric_limits&lt;T&gt;::<span class="hljs-built_in">max</span>()) &#123;<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">overflow_error</span>(<span class="hljs-string">&quot;è½¬æ¢æº¢å‡º&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;T&gt;(u);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="2-Java-Mathæ–¹æ³•"><strong>(2) Java Mathæ–¹æ³•</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç²¾ç¡®è½¬æ¢éªŒè¯</span><br><span class="hljs-type">long</span> <span class="hljs-variable">bigValue</span> <span class="hljs-operator">=</span> <span class="hljs-number">12345678901L</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">small</span> <span class="hljs-operator">=</span> Math.toIntExact(bigValue); <span class="hljs-comment">// æŠ›å‡ºArithmeticException</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-é™æ€åˆ†æé…ç½®"><strong>5. é™æ€åˆ†æé…ç½®</strong></h3>
<p><strong>CMakeç¼–è¯‘é€‰é¡¹</strong>ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment"># å¼€å¯æ‰€æœ‰è­¦å‘Š</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; -Wconversion -Wsign-conversion&quot;</span>)<br></code></pre></td></tr></table></figure>
<p><strong>Clang-Tidyæ£€æŸ¥</strong>ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Checks:</span> <span class="hljs-string">&gt;</span><br>  <span class="hljs-string">-*,clang-analyzer-core.NarrowingConversion</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="6-è¿è¡Œæ—¶æ£€æµ‹"><strong>6. è¿è¡Œæ—¶æ£€æµ‹</strong></h3>
<h4 id="1-è¾¹ç•Œæ£€æŸ¥åŒ…è£…å™¨"><strong>(1) è¾¹ç•Œæ£€æŸ¥åŒ…è£…å™¨</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeNumber</span> &#123;<br>    <span class="hljs-type">int32_t</span> val;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">SafeNumber</span><span class="hljs-params">(<span class="hljs-type">int64_t</span> input)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (input &lt; INT32_MIN || input &gt; INT32_MAX)<br>            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">overflow_error</span>();<br>        val = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int32_t</span>&gt;(input);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
<h4 id="2-æµ®ç‚¹ç²¾åº¦æ ¡éªŒ"><strong>(2) æµ®ç‚¹ç²¾åº¦æ ¡éªŒ</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_cast_float32</span>(<span class="hljs-params">x: np.float64</span>) -&gt; np.float32:<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> np.isfinite(x):<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;éæœ‰é™æ•°å€¼&quot;</span>)<br>    f32 = np.float32(x)<br>    <span class="hljs-keyword">if</span> np.<span class="hljs-built_in">abs</span>(f64 - f32) &gt; <span class="hljs-number">1e-6</span>:<br>        <span class="hljs-keyword">raise</span> PrecisionLossError<br>    <span class="hljs-keyword">return</span> f32<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="7-è½¬æ¢å®‰å…¨å†³ç­–æ ‘"><strong>7. è½¬æ¢å®‰å…¨å†³ç­–æ ‘</strong></h3>
<pre><code class=" mermaid">graph TD
    A[éœ€è¦ç±»å‹è½¬æ¢] --&gt; B&#123;æ˜¯å¦å­˜åœ¨æ½œåœ¨æ•°æ®ä¸¢å¤±?&#125;
    B -- Yes --&gt; C[ä½¿ç”¨å®‰å…¨è½¬æ¢å‡½æ•°]
    B -- No --&gt; D[ç›´æ¥é™æ€è½¬æ¢]
    C --&gt; E&#123;è½¬æ¢æˆåŠŸ?&#125;
    E -- Yes --&gt; F[ç»§ç»­æ‰§è¡Œ]
    E -- No --&gt; G[å¤„ç†é”™è¯¯]
</code></pre>
<hr>
<p>é€šè¿‡ä¸¥æ ¼éµå¾ªçª„åŒ–è½¬æ¢é˜²æŠ¤è§„èŒƒï¼Œå¯å°†æ•°å€¼ç›¸å…³é”™è¯¯å‡å°‘çº¦70%ï¼ˆåŸºäºMozillaä»£ç å®¡è®¡æ•°æ®ï¼‰ã€‚å»ºè®®å°†å®‰å…¨è½¬æ¢å‡½æ•°å°è£…ä¸ºå…¬å…±åº“ï¼Œå¹¶åœ¨ä»£ç è¯„å®¡æ—¶é‡ç‚¹æ£€æŸ¥æ‰€æœ‰æ˜¾å¼ç±»å‹è½¬æ¢æ“ä½œã€‚å¯¹äºæ€§èƒ½å…³é”®è·¯å¾„ï¼Œå¯ä½¿ç”¨ç¼–è¯‘å™¨å†…ç½®å‡½æ•°ï¼ˆå¦‚GCCçš„<code>__builtin_add_overflow</code>ï¼‰è¿›è¡Œå¿«é€Ÿæº¢å‡ºæ£€æµ‹ã€‚</p>
<h1>8 å®šä¹‰ç¬¦å·åŒ–å¸¸é‡ä»¥é˜²æ­¢å‡ºç°â€œé­”æ³•å¸¸é‡â€ã€‚</h1>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä½¿ç”¨ç¬¦å·åŒ–å¸¸é‡ï¼ˆSymbolic Constantsï¼‰ä»£æ›¿é­”æ³•æ•°å­—/å­—ç¬¦ä¸²æ˜¯æå‡ä»£ç å¯ç»´æŠ¤æ€§çš„é‡è¦å®è·µã€‚ä»¥ä¸‹æ˜¯åˆ†å±‚å®æ–½æŒ‡å—ï¼š</p>
<hr>
<h3 id="1-åŸºç¡€å¸¸é‡å®šä¹‰"><strong>1. åŸºç¡€å¸¸é‡å®šä¹‰</strong></h3>
<h4 id="1-ç®€å•æ•°å€¼æ›¿æ¢"><strong>(1) ç®€å•æ•°å€¼æ›¿æ¢</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åæ¨¡å¼ï¼šç›´æ¥ä½¿ç”¨é­”æ³•æ•°å­—</span><br><span class="hljs-keyword">if</span> status == <span class="hljs-number">5</span>:<br>    process_error()<br><br><span class="hljs-comment"># æ­£è§£ï¼šå®šä¹‰è¯­ä¹‰åŒ–å¸¸é‡</span><br>ERROR_STATUS = <span class="hljs-number">5</span><br><span class="hljs-keyword">if</span> status == ERROR_STATUS:<br>    process_error()<br></code></pre></td></tr></table></figure>
<h4 id="2-å­—ç¬¦ä¸²å¸¸é‡åŒ–"><strong>(2) å­—ç¬¦ä¸²å¸¸é‡åŒ–</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é¿å…ç¡¬ç¼–ç è·¯å¾„</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FilePaths</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONFIG_FILE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;/etc/app/config.yaml&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOG_DIR</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;/var/log/app/&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="2-æšä¸¾ç±»å‹åº”ç”¨"><strong>2. æšä¸¾ç±»å‹åº”ç”¨</strong></h3>
<h4 id="1-çŠ¶æ€æœºå®šä¹‰"><strong>(1) çŠ¶æ€æœºå®šä¹‰</strong></h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨æšä¸¾ä»£æ›¿æ•°å­—ä»£ç </span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConnectionState</span> &#123;<br>    <span class="hljs-variable constant_">DISCONNECTED</span> = <span class="hljs-number">0</span>,<br>    <span class="hljs-variable constant_">CONNECTING</span> = <span class="hljs-number">1</span>,<br>    <span class="hljs-variable constant_">CONNECTED</span> = <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleState</span>(<span class="hljs-params"><span class="hljs-attr">state</span>: <span class="hljs-title class_">ConnectionState</span></span>) &#123;<br>    <span class="hljs-keyword">switch</span>(state) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-title class_">ConnectionState</span>.<span class="hljs-property">CONNECTED</span>:<br>            <span class="hljs-comment">// ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="2-å¸¦å±æ€§çš„æšä¸¾"><strong>(2) å¸¦å±æ€§çš„æšä¸¾</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">HttpStatus</span> &#123;<br>    OK(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;OK&quot;</span>),<br>    NOT_FOUND(<span class="hljs-number">404</span>, <span class="hljs-string">&quot;Not Found&quot;</span>);<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String message;<br><br>    HttpStatus(<span class="hljs-type">int</span> code, String message) &#123;<br>        <span class="hljs-built_in">this</span>.code = code;<br>        <span class="hljs-built_in">this</span>.message = message;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCode</span><span class="hljs-params">()</span> &#123; <span class="hljs-keyword">return</span> code; &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> &#123; <span class="hljs-keyword">return</span> message; &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="3-å¸¸é‡åˆ†ç±»ç­–ç•¥"><strong>3. å¸¸é‡åˆ†ç±»ç­–ç•¥</strong></h3>
<table>
<thead>
<tr>
<th>å¸¸é‡ç±»å‹</th>
<th>å­˜å‚¨ä½ç½®</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ•°å­¦å¸¸é‡</td>
<td>MathConstantsç±»</td>
<td>PI, E, GOLDEN_RATIO</td>
</tr>
<tr>
<td>ä¸šåŠ¡å‚æ•°</td>
<td>BusinessRulesç±»</td>
<td>MAX_ORDER_ITEMS, TAX_RATE</td>
</tr>
<tr>
<td>ç³»ç»Ÿé…ç½®</td>
<td>Configç±»/é…ç½®æ–‡ä»¶</td>
<td>TIMEOUT_MS, DB_URL</td>
</tr>
<tr>
<td>UIæ˜¾ç¤ºæ–‡æœ¬</td>
<td>å›½é™…åŒ–èµ„æºæ–‡ä»¶</td>
<td>greeting.message</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="4-é«˜çº§æ¨¡å¼"><strong>4. é«˜çº§æ¨¡å¼</strong></h3>
<h4 id="1-å¸¸é‡æ¥å£æ¨¡å¼"><strong>(1) å¸¸é‡æ¥å£æ¨¡å¼</strong></h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// é›†ä¸­ç®¡ç†ç›¸å…³å¸¸é‡</span><br><span class="hljs-keyword">namespace</span> NetworkConstants &#123;<br>    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> MAX_PACKET_SIZE = <span class="hljs-number">1500</span>;<br>    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> DEFAULT_PORT = <span class="hljs-number">8080</span>;<br>    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> TIMEOUT_MS = <span class="hljs-number">3000</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="2-å¸¸é‡éªŒè¯æœºåˆ¶"><strong>(2) å¸¸é‡éªŒè¯æœºåˆ¶</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeConstants</span>:<br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">assert</span> cls.MAX_VALUE &gt; cls.MIN_VALUE, <span class="hljs-string">&quot;å¸¸é‡å€¼å†²çª&quot;</span><br>        <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(cls.TIMEOUT, <span class="hljs-built_in">int</span>), <span class="hljs-string">&quot;ç±»å‹é”™è¯¯&quot;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span>(<span class="hljs-title class_ inherited__">SafeConstants</span>):<br>    MAX_VALUE = <span class="hljs-number">100</span><br>    MIN_VALUE = <span class="hljs-number">0</span><br>    TIMEOUT = <span class="hljs-number">30</span><br><br><span class="hljs-comment"># å¯åŠ¨æ—¶éªŒè¯</span><br>AppConfig.validate()<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="5-ä»£ç å¼‚å‘³æ£€æµ‹"><strong>5. ä»£ç å¼‚å‘³æ£€æµ‹</strong></h3>
<table>
<thead>
<tr>
<th>é—®é¢˜ç°è±¡</th>
<th>é‡æ„æ–¹æ¡ˆ</th>
<th>é™æ€åˆ†æå·¥å…·è§„åˆ™</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŒä¸€æ•°å€¼å‡ºç°3æ¬¡ä»¥ä¸Š</td>
<td>æå–ä¸ºå…¬å…±å¸¸é‡</td>
<td>SonarQube: S109</td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²åŒ…å«ä¸šåŠ¡è¯­ä¹‰</td>
<td>ç§»å…¥èµ„æºæ–‡ä»¶</td>
<td>Checkstyle: Regexp</td>
</tr>
<tr>
<td>æ•°å­—ç”¨äºéæ•°å­¦è¿ç®—</td>
<td>åˆ›å»ºæšä¸¾ç±»å‹</td>
<td>ESLint: no-magic-numbers</td>
</tr>
<tr>
<td>é…ç½®å‚æ•°æ•£è½å¤šæ–‡ä»¶</td>
<td>é›†ä¸­åˆ°é…ç½®ç±»</td>
<td>PMD: AvoidDuplicateLiterals</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="6-è‡ªåŠ¨é‡æ„æŠ€å·§"><strong>6. è‡ªåŠ¨é‡æ„æŠ€å·§</strong></h3>
<p><strong>IntelliJ IDEAé‡æ„ç¤ºä¾‹</strong>ï¼š</p>
<ol>
<li>é€‰ä¸­é­”æ³•æ•°å­— <code>42</code></li>
<li><code>Ctrl+Alt+C</code> æå–å¸¸é‡</li>
<li>å‘½åå¸¸é‡ <code>MAX_CONNECTION_POOL_SIZE</code></li>
</ol>
<p><strong>VS Codeæ­£åˆ™æœç´¢</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs regex">/\b\d&#123;3,&#125;\b/  # æŸ¥æ‰¾æ‰€æœ‰&gt;=100çš„è£¸æ•°å­—<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="7-æ€§èƒ½ä¼˜åŒ–è€ƒé‡"><strong>7. æ€§èƒ½ä¼˜åŒ–è€ƒé‡</strong></h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">// ä½¿ç”¨constä¿è¯ç¼–è¯‘æœŸè®¡ç®—</span><br><span class="hljs-keyword">const</span> MAX_CACHE_ENTRIES: <span class="hljs-type">usize</span> = <span class="hljs-number">1024</span>;<br><span class="hljs-keyword">static</span> LOG_PREFIX: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">&quot;SYSTEM&quot;</span>;<br><br><span class="hljs-comment">// æ¯”letæ›´é«˜æ•ˆ</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">cache</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(MAX_CACHE_ENTRIES);<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="8-å®æ–½è·¯çº¿å›¾"><strong>8. å®æ–½è·¯çº¿å›¾</strong></h3>
<ol>
<li><strong>ä»£ç å®¡è®¡</strong>ï¼šä½¿ç”¨é™æ€åˆ†æå·¥å…·æ‰«æé­”æ³•å¸¸é‡</li>
<li><strong>ä¼˜å…ˆçº§æ’åº</strong>ï¼šæŒ‰å‡ºç°é¢‘ç‡é™åºå¤„ç†</li>
<li><strong>åˆ†ç±»è¿ç§»</strong>ï¼šå°†å¸¸é‡ç§»åŠ¨åˆ°åˆé€‚çš„é€»è¾‘ä½ç½®</li>
<li><strong>æ–‡æ¡£æ›´æ–°</strong>ï¼šç»´æŠ¤å¸¸é‡å­—å…¸è¯´æ˜</li>
<li><strong>å›¢é˜ŸåŸ¹è®­</strong>ï¼šå»ºç«‹å¸¸é‡ä½¿ç”¨è§„èŒƒ</li>
</ol>
<hr>
<p>é€šè¿‡ç³»ç»ŸåŒ–åº”ç”¨ç¬¦å·åŒ–å¸¸é‡ï¼Œå¯æå‡ä»£ç å¯ç»´æŠ¤æ€§40%ä»¥ä¸Šï¼ˆæ®IEEEç ”ç©¶æ•°æ®ï¼‰ã€‚å»ºè®®åœ¨ä»£ç å®¡æŸ¥æ¸…å•ä¸­åŠ å…¥å¸¸é‡æ£€æŸ¥é¡¹ï¼Œå¹¶é€šè¿‡æŒç»­é›†æˆå·¥å…·ç¡®ä¿è§„èŒƒçš„é•¿æœŸæ‰§è¡Œã€‚å¯¹äºé—ç•™ç³»ç»Ÿæ”¹é€ ï¼Œå¯é‡‡ç”¨é€æ­¥æ›¿æ¢ç­–ç•¥ï¼Œä¼˜å…ˆå¤„ç†æ ¸å¿ƒä¸šåŠ¡æ¨¡å—çš„é­”æ³•å¸¸é‡ã€‚</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/C-%E7%AC%94%E8%AE%B0/" class="category-chain-item">C++ç¬”è®°</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¡¨è¾¾å¼</div>
      <div>https://mounthuangshan.github.io/C-ç¬”è®°/C++ç¬”è®°/C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¡¨è¾¾å¼/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>é»„å±±</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´3æœˆ19æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/C-%E7%AC%94%E8%AE%B0/C++%E7%AC%94%E8%AE%B0/C++%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%EF%BC%9A%E7%BB%93%E6%9E%84%E3%80%81%E8%81%94%E5%90%88%E4%B8%8E%E6%9E%9A%E4%B8%BE/" title="C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šç»“æ„ã€è”åˆä¸æšä¸¾">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šç»“æ„ã€è”åˆä¸æšä¸¾</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/C-%E7%AC%94%E8%AE%B0/C++%E7%AC%94%E8%AE%B0/C++%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%EF%BC%9A%E8%AF%AD%E5%8F%A5/" title="C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¯­å¥">
                        <span class="hidden-mobile">C++ç¨‹åºè®¾è®¡è¯­è¨€ç¬”è®°â€”â€”åŸºæœ¬åŠŸèƒ½ï¼šè¯­å¥</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
